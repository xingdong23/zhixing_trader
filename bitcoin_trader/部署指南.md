# Bitcoin Trader é˜¿é‡Œäº‘éƒ¨ç½²æŒ‡å—

## ðŸ“‹ æœåŠ¡å™¨ä¿¡æ¯

- **æœåŠ¡å™¨IP**: 101.42.14.209
- **ç”¨æˆ·**: root
- **å¯†ç **: czbcxy25809*
- **éƒ¨ç½²ç›®å½•**: /opt/zhixing_trader
- **æ•°æ®åº“**: MySQL (ç”¨æˆ·: root, å¯†ç : shuzhongren)

---

## ðŸš€ å¿«é€Ÿéƒ¨ç½²ï¼ˆæŽ¨èï¼‰

### æ–¹å¼ä¸€ï¼šä½¿ç”¨éƒ¨ç½²è„šæœ¬ï¼ˆè‡ªåŠ¨åŒ–ï¼‰

åœ¨æœ¬åœ°æ‰§è¡Œï¼š

```bash
cd /Users/chengzheng/workspace/chuangxin/zhixing_trader/bitcoin_trader
bash deploy_git.sh
```

è¾“å…¥æœåŠ¡å™¨å¯†ç ï¼š`czbcxy25809*`

è„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆï¼š
- âœ… æ£€æŸ¥å’Œå®‰è£…ä¾èµ–ï¼ˆGit, Python3, pip3ï¼‰
- âœ… å…‹éš†/æ‹‰å–ä»£ç 
- âœ… å®‰è£…Pythonä¾èµ–
- âœ… åˆ›å»ºé…ç½®æ–‡ä»¶
- âœ… é…ç½®systemdæœåŠ¡

---

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨éƒ¨ç½²ï¼ˆé€æ­¥æ“ä½œï¼‰

#### 1. è¿žæŽ¥åˆ°æœåŠ¡å™¨

```bash
ssh root@101.42.14.209
# å¯†ç : czbcxy25809*
```

#### 2. å®‰è£…ä¾èµ–

```bash
# å®‰è£… Git
yum install -y git

# å®‰è£… Python3 å’Œ pip
yum install -y python3 python3-pip

# éªŒè¯å®‰è£…
git --version
python3 --version
pip3 --version
```

#### 3. å…‹éš†ä»£ç ï¼ˆé¦–æ¬¡éƒ¨ç½²ï¼‰

```bash
cd /opt
git clone https://github.com/xingdong23/zhixing_trader.git
cd zhixing_trader
```

#### 4. å®‰è£…Pythonä¾èµ–

```bash
cd /opt/zhixing_trader/bitcoin_trader
pip3 install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

#### 5. é…ç½®çŽ¯å¢ƒå˜é‡

```bash
cd /opt/zhixing_trader/bitcoin_trader

# åˆ›å»º .env æ–‡ä»¶
cat > .env << 'EOF'
# OKX API é…ç½®
OKX_API_KEY=your_api_key_here
OKX_API_SECRET=your_api_secret_here
OKX_PASSPHRASE=your_passphrase_here

# æ•°æ®åº“é…ç½®
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=shuzhongren
DB_NAME=bitcoin_trader

# æ—¥å¿—é…ç½®
LOG_LEVEL=INFO
EOF

# ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œå¡«å…¥çœŸå®žçš„OKX APIä¿¡æ¯
vim .env
```

#### 6. åˆ›å»ºæ—¥å¿—ç›®å½•

```bash
mkdir -p /opt/zhixing_trader/bitcoin_trader/logs
```

#### 7. æµ‹è¯•è¿è¡Œ

```bash
cd /opt/zhixing_trader/bitcoin_trader

# æµ‹è¯•ç­–ç•¥é›†æˆ
python3 test_strategy_integration.py

# æµ‹è¯•EMAç­–ç•¥
python3 test_ema_strategy.py
```

#### 8. é…ç½®systemdæœåŠ¡

```bash
# åˆ›å»ºæœåŠ¡æ–‡ä»¶
cat > /etc/systemd/system/bitcoin-trader.service << 'EOF'
[Unit]
Description=Bitcoin Trader - EMA Trend Strategy
After=network.target mysql.service

[Service]
Type=simple
User=root
WorkingDirectory=/opt/zhixing_trader/bitcoin_trader
ExecStart=/usr/bin/python3 /opt/zhixing_trader/bitcoin_trader/run_okx_live_demo.py
Restart=on-failure
RestartSec=10
StandardOutput=append:/opt/zhixing_trader/bitcoin_trader/logs/trader.log
StandardError=append:/opt/zhixing_trader/bitcoin_trader/logs/trader.error.log
Environment="PYTHONUNBUFFERED=1"

[Install]
WantedBy=multi-user.target
EOF

# é‡è½½systemd
systemctl daemon-reload
```

---

## ðŸŽ® æœåŠ¡ç®¡ç†å‘½ä»¤

### å¯åŠ¨æœåŠ¡

```bash
systemctl start bitcoin-trader
```

### æŸ¥çœ‹çŠ¶æ€

```bash
systemctl status bitcoin-trader
```

### åœæ­¢æœåŠ¡

```bash
systemctl stop bitcoin-trader
```

### é‡å¯æœåŠ¡

```bash
systemctl restart bitcoin-trader
```

### è®¾ç½®å¼€æœºè‡ªå¯

```bash
systemctl enable bitcoin-trader
```

### å–æ¶ˆå¼€æœºè‡ªå¯

```bash
systemctl disable bitcoin-trader
```

---

## ðŸ“Š æ—¥å¿—æŸ¥çœ‹

### æŸ¥çœ‹å®žæ—¶æ—¥å¿—

```bash
tail -f /opt/zhixing_trader/bitcoin_trader/logs/trader.log
```

### æŸ¥çœ‹é”™è¯¯æ—¥å¿—

```bash
tail -f /opt/zhixing_trader/bitcoin_trader/logs/trader.error.log
```

### æŸ¥çœ‹systemdæ—¥å¿—

```bash
journalctl -u bitcoin-trader -f
```

### æŸ¥çœ‹æœ€è¿‘100è¡Œæ—¥å¿—

```bash
tail -n 100 /opt/zhixing_trader/bitcoin_trader/logs/trader.log
```

---

## ðŸ”„ ä»£ç æ›´æ–°æµç¨‹

### 1. åœ¨æœ¬åœ°ä¿®æ”¹ä»£ç 

```bash
# åœ¨æœ¬åœ°ä¿®æ”¹ä»£ç åŽ
cd /Users/chengzheng/workspace/chuangxin/zhixing_trader

# æäº¤åˆ°git
git add .
git commit -m "æ›´æ–°è¯´æ˜Ž"
git push origin main
```

### 2. åœ¨æœåŠ¡å™¨ä¸Šæ›´æ–°

```bash
# SSHè¿žæŽ¥åˆ°æœåŠ¡å™¨
ssh root@101.42.14.209

# åœæ­¢æœåŠ¡
systemctl stop bitcoin-trader

# æ‹‰å–æœ€æ–°ä»£ç 
cd /opt/zhixing_trader
git pull origin main

# å¦‚æžœæœ‰æ–°çš„ä¾èµ–ï¼Œé‡æ–°å®‰è£…
cd bitcoin_trader
pip3 install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple

# é‡å¯æœåŠ¡
systemctl start bitcoin-trader

# æŸ¥çœ‹çŠ¶æ€
systemctl status bitcoin-trader
```

---

## ðŸ” æ•…éšœæŽ’æŸ¥

### 1. æœåŠ¡å¯åŠ¨å¤±è´¥

```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯
systemctl status bitcoin-trader
journalctl -u bitcoin-trader -n 50

# æ£€æŸ¥é…ç½®æ–‡ä»¶
cat /opt/zhixing_trader/bitcoin_trader/.env

# æ‰‹åŠ¨è¿è¡Œæµ‹è¯•
cd /opt/zhixing_trader/bitcoin_trader
python3 run_okx_live_demo.py
```

### 2. ç½‘ç»œè¿žæŽ¥é—®é¢˜

```bash
# æµ‹è¯•ç½‘ç»œè¿žæŽ¥
ping www.okx.com
curl https://www.okx.com

# æ£€æŸ¥é˜²ç«å¢™
systemctl status firewalld
```

### 3. Pythonä¾èµ–é—®é¢˜

```bash
# é‡æ–°å®‰è£…ä¾èµ–
cd /opt/zhixing_trader/bitcoin_trader
pip3 install -r requirements.txt --force-reinstall -i https://pypi.tuna.tsinghua.edu.cn/simple
```

### 4. æ•°æ®åº“è¿žæŽ¥é—®é¢˜

```bash
# æµ‹è¯•MySQLè¿žæŽ¥
mysql -uroot -pshuzhongren

# æ£€æŸ¥MySQLæœåŠ¡
systemctl status mysqld
```

---

## ðŸ“ é…ç½®æ–‡ä»¶è¯´æ˜Ž

### .env é…ç½®é¡¹

```bash
# OKX APIé…ç½®ï¼ˆå¿…é¡»ï¼‰
OKX_API_KEY=your_api_key          # OKX API Key
OKX_API_SECRET=your_secret        # OKX API Secret
OKX_PASSPHRASE=your_passphrase    # OKX API Passphrase

# æ•°æ®åº“é…ç½®
DB_HOST=localhost                 # æ•°æ®åº“åœ°å€
DB_PORT=3306                      # æ•°æ®åº“ç«¯å£
DB_USER=root                      # æ•°æ®åº“ç”¨æˆ·
DB_PASSWORD=shuzhongren           # æ•°æ®åº“å¯†ç 
DB_NAME=bitcoin_trader            # æ•°æ®åº“åç§°

# æ—¥å¿—é…ç½®
LOG_LEVEL=INFO                    # æ—¥å¿—çº§åˆ«: DEBUG/INFO/WARNING/ERROR
```

---

## ðŸŽ¯ å½“å‰ç­–ç•¥é…ç½®

**ç­–ç•¥**: EMAè¶‹åŠ¿è·Ÿéšç­–ç•¥

**å‚æ•°**:
- EMAå‘¨æœŸ: 8/21/55
- ä»“ä½: 30%
- æœ€å¤§äºæŸ: 4%
- æ­¢ç›ˆç›®æ ‡: 5%/10%/15%
- æ—¶é—´å‘¨æœŸ: 5åˆ†é’Ÿ
- æ£€æŸ¥é—´éš”: 30ç§’

**é£Žé™©æŽ§åˆ¶**:
- æœ€å¤§ä»“ä½: 0.05 BTC
- å•ç¬”æœ€å¤§: 2000 USDT
- æ—¥äºæŸé™åˆ¶: 5%

---

## âš ï¸ é‡è¦æç¤º

1. **APIå¯†é’¥å®‰å…¨**
   - ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç APIå¯†é’¥
   - ä½¿ç”¨.envæ–‡ä»¶ç®¡ç†æ•æ„Ÿä¿¡æ¯
   - å®šæœŸæ›´æ¢APIå¯†é’¥

2. **é£Žé™©æŽ§åˆ¶**
   - åˆæœŸä½¿ç”¨å°ä»“ä½æµ‹è¯•
   - ä¸¥æ ¼éµå®ˆæ­¢æŸè§„åˆ™
   - å®šæœŸæ£€æŸ¥äº¤æ˜“è®°å½•

3. **ç›‘æŽ§å‘Šè­¦**
   - å®šæœŸæŸ¥çœ‹æ—¥å¿—
   - ç›‘æŽ§æœåŠ¡è¿è¡ŒçŠ¶æ€
   - è®¾ç½®å¼‚å¸¸å‘Šè­¦

4. **ä»£ç ç®¡ç†**
   - æ‰€æœ‰ä¿®æ”¹å¿…é¡»åœ¨æœ¬åœ°å®Œæˆ
   - æäº¤åˆ°gitåŽå†éƒ¨ç½²
   - ä¸è¦ç›´æŽ¥åœ¨æœåŠ¡å™¨ä¿®æ”¹ä»£ç 

---

## ðŸ“ž å¿«é€Ÿå‘½ä»¤å‚è€ƒ

```bash
# è¿žæŽ¥æœåŠ¡å™¨
ssh root@101.42.14.209

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
systemctl status bitcoin-trader

# æŸ¥çœ‹å®žæ—¶æ—¥å¿—
tail -f /opt/zhixing_trader/bitcoin_trader/logs/trader.log

# æ›´æ–°ä»£ç 
cd /opt/zhixing_trader && git pull origin main

# é‡å¯æœåŠ¡
systemctl restart bitcoin-trader

# ç¼–è¾‘é…ç½®
vim /opt/zhixing_trader/bitcoin_trader/.env
```

---

**éƒ¨ç½²å®ŒæˆåŽï¼Œè®°å¾—é…ç½®OKX APIå¯†é’¥ï¼** ðŸ”‘
