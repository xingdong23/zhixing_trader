# 新策略说明文档

## 📚 策略概览

本项目现在包含三个交易策略，每个策略适用于不同的市场环境：

| 策略 | 适用场景 | 交易频率 | 盈亏比 | 手续费敏感度 |
|------|---------|---------|--------|------------|
| **高频剥头皮** | 任何市场 | 极高（日均50+） | 低（0.6） | ❌ 极高 |
| **网格交易** | 震荡市 | 中等（日均5-15） | 中（1.5） | ✅ 中等 |
| **趋势跟踪** | 趋势市 | 低（周均1-3） | 高（3-5） | ✅ 低 |

---

## 🔷 策略1：网格交易策略

### 核心思想
在价格区间内设置多个网格线，价格下跌到网格线时买入，上涨到网格线时卖出，通过频繁的低买高卖获利。

### 适用场景
- ✅ 横盘震荡市
- ✅ 区间波动明显
- ❌ 单边趋势市（会频繁止损）

### 策略参数

```json
{
  "grid_settings": {
    "price_range_percent": 0.15,    // 网格价格范围 ±15%
    "num_grids": 10,                 // 网格数量
    "grid_profit_percent": 0.015,    // 每格利润目标 1.5%
    "min_grid_spacing": 0.008        // 最小网格间距 0.8%
  }
}
```

### 交易逻辑

**开仓条件：**
1. 价格触及下方网格线
2. 该网格线无持仓
3. 未达到最大持仓数

**平仓条件：**
1. 价格触及上方网格线
2. 对应的买入网格有持仓
3. 达到网格利润目标

### 风险控制
- 最大持仓数：8个网格
- 单日最大亏损：5%
- 价格突破网格范围时自动调整

### 预期表现
- **胜率**：60-70%
- **盈亏比**：1.2-1.8
- **月收益**：5-15%（震荡市）
- **最大回撤**：15-25%

---

## 🔶 策略2：趋势跟踪策略

### 核心思想
识别强劲趋势后入场，使用ATR动态止损，让利润充分奔跑，通过少量高质量交易获取大额利润。

### 适用场景
- ✅ 单边趋势市
- ✅ 突破行情
- ❌ 震荡市（会频繁假突破）

### 策略参数

```json
{
  "trend_indicators": {
    "ema_fast": 20,           // 快速EMA
    "ema_slow": 50,           // 慢速EMA
    "ema_filter": 200,        // 趋势过滤EMA
    "adx_threshold": 25       // ADX趋势强度阈值
  },
  "exit_conditions": {
    "profit_target_atr": 4.0, // 止盈 = 4倍ATR
    "stop_loss_atr": 2.0,     // 止损 = 2倍ATR
    "trailing_stop_atr": 3.0  // 追踪止损 = 3倍ATR
  }
}
```

### 交易逻辑

**开仓条件（做多）：**
1. EMA20上穿EMA50（趋势确认）
2. 价格在EMA200之上（趋势过滤）
3. ADX > 25（趋势强度确认）
4. 成交量放大（动能确认）

**平仓条件：**
1. 触及止损/止盈
2. EMA反向交叉（趋势反转）
3. 追踪止损触发（保护利润）
4. 超过最大持仓时间（30天）

### 风险控制
- 单笔风险：2%
- 最大持仓：1个
- 连续亏损限制：2次
- 日内最大亏损：5%

### 预期表现
- **胜率**：40-50%
- **盈亏比**：3-5
- **月收益**：10-30%（趋势市）
- **最大回撤**：20-30%

---

## 📊 策略对比分析

### 手续费影响对比（欧易0.05% Taker）

| 策略 | 月交易次数 | 月手续费 | 手续费占比 | 可行性 |
|------|----------|---------|-----------|--------|
| **高频剥头皮** | 1500+ | 150+ USDT | >50% | ❌ 不可行 |
| **网格交易** | 150-300 | 15-30 USDT | 5-10% | ✅ 可行 |
| **趋势跟踪** | 4-12 | 1-3 USDT | <1% | ✅ 可行 |

### 市场适应性

```
震荡市（60%时间）：
  网格交易 ⭐⭐⭐⭐⭐
  趋势跟踪 ⭐⭐
  高频剥头皮 ⭐⭐⭐

趋势市（30%时间）：
  网格交易 ⭐⭐
  趋势跟踪 ⭐⭐⭐⭐⭐
  高频剥头皮 ⭐⭐⭐

剧烈波动（10%时间）：
  网格交易 ⭐⭐⭐
  趋势跟踪 ⭐⭐⭐⭐
  高频剥头皮 ⭐
```

---

## 🚀 使用指南

### 1. 网格策略回测

```bash
# 修改回测配置
vim backtest/configs/backtest_config.json

# 修改strategy部分：
{
  "strategy": {
    "name": "grid_trading",
    "config_file": "../app/config/grid_trading.json"
  }
}

# 运行回测
python backtest/run_backtest.py
```

### 2. 趋势策略回测

```bash
# 修改strategy部分：
{
  "strategy": {
    "name": "trend_following",
    "config_file": "../app/config/trend_following.json"
  }
}

# 运行回测
python backtest/run_backtest.py
```

---

## 💡 实盘建议

### 网格策略
1. **初始资金**：建议500-1000 USDT
2. **杠杆**：1倍（现货）或2倍
3. **网格数量**：8-12个
4. **适用币种**：ETH、BTC等主流币
5. **监控频率**：每日检查1-2次

### 趋势策略
1. **初始资金**：建议300-500 USDT
2. **杠杆**：2-3倍
3. **时间周期**：1小时或4小时
4. **适用币种**：波动大的币种
5. **监控频率**：每日检查1次

---

## ⚠️ 风险提示

1. **回测≠实盘**
   - 回测数据可能过拟合
   - 实盘滑点、延迟会影响表现
   - 建议先小资金测试

2. **市场环境变化**
   - 网格策略在趋势市会亏损
   - 趋势策略在震荡市会频繁止损
   - 需要根据市场切换策略

3. **资金管理**
   - 不要满仓
   - 控制单笔风险在2%以内
   - 设置总体止损线

4. **心理准备**
   - 连续亏损是正常的
   - 不要频繁调整参数
   - 坚持策略纪律

---

## 📈 后续优化方向

1. **策略组合**
   - 同时运行网格+趋势
   - 根据市场环境自动切换
   - 资金动态分配

2. **参数优化**
   - 使用遗传算法优化参数
   - 针对不同币种调整
   - 季节性参数调整

3. **风控升级**
   - 动态仓位管理
   - 波动率自适应
   - 相关性对冲

---

## 📞 技术支持

如有问题，请查看：
- 策略代码：`app/strategies/`
- 配置文件：`app/config/`
- 回测引擎：`backtest/core/`

祝交易顺利！🎉
