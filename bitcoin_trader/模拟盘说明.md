# 模拟盘与实盘说明

## 重要更新 ✅

代码已修正！现在**模拟盘和实盘都会真实调用OKX API下单**。

## 模拟盘 vs 实盘

### 模拟盘模式 (paper)
- ✅ **真实调用OKX API**：使用 `exchange.create_market_buy_order()` 下单
- ✅ **使用模拟资金**：OKX模拟盘账户的资金（虚拟的）
- ✅ **真实市场价格**：按照真实市场价格成交
- ✅ **真实订单流程**：经历完整的下单、成交、持仓流程
- ⚠️ **需要模拟盘API Key**：在OKX官网申请模拟盘API Key

### 实盘模式 (live)
- ✅ **真实调用OKX API**：使用 `exchange.create_market_buy_order()` 下单
- ⚠️ **使用真实资金**：OKX实盘账户的真实资金
- ✅ **真实市场价格**：按照真实市场价格成交
- ✅ **真实订单流程**：经历完整的下单、成交、持仓流程
- ⚠️ **需要实盘API Key**：在OKX官网申请实盘API Key

## 两者的唯一区别

**只有API Key不同！**

```python
# 模拟盘：使用模拟盘API Key
OKX_API_KEY=your_demo_api_key
OKX_API_SECRET=your_demo_api_secret
OKX_PASSPHRASE=your_demo_passphrase

# 实盘：使用实盘API Key
OKX_API_KEY=your_live_api_key
OKX_API_SECRET=your_live_api_secret
OKX_PASSPHRASE=your_live_passphrase
```

## 代码实现

```python
# 模拟盘和实盘都使用相同的下单代码
if signal["signal"] == "buy":
    order = self.exchange.create_market_buy_order(
        symbol=self.symbol,
        amount=signal["amount"]
    )
    mode_text = "模拟盘" if self.mode == 'paper' else "实盘"
    logger.info(f"✓ [{mode_text}] 买入订单执行成功: {order}")
```

## 如何使用

### 1. 申请API Key

**模拟盘API Key：**
1. 登录OKX官网
2. 进入"模拟交易"
3. 创建模拟盘API Key
4. 配置到 `.env` 文件

**实盘API Key：**
1. 登录OKX官网
2. 进入"API管理"
3. 创建实盘API Key（需要实名认证）
4. 配置到 `.env` 文件

### 2. 运行策略

```bash
# 模拟盘（使用模拟盘API Key）
python run/high_frequency.py --mode paper

# 实盘（使用实盘API Key）
python run/high_frequency.py --mode live
```

## 优势

✅ **完全真实的测试环境**
- 模拟盘使用真实的OKX API
- 体验完整的下单、成交、持仓流程
- 测试结果更接近实盘

✅ **无风险测试**
- 模拟盘使用虚拟资金
- 可以放心测试策略
- 不会有任何资金损失

✅ **代码一致性**
- 模拟盘和实盘使用相同的代码
- 切换到实盘时无需修改代码
- 只需更换API Key即可

## 注意事项

⚠️ **模拟盘和实盘使用不同的API Key**
- 不要混用API Key
- 模拟盘Key只能用于模拟交易
- 实盘Key只能用于实盘交易

⚠️ **建议先在模拟盘充分测试**
- 确保策略逻辑正确
- 验证风险控制有效
- 熟悉交易流程

⚠️ **实盘交易需谨慎**
- 使用真实资金
- 存在亏损风险
- 建议小资金测试
