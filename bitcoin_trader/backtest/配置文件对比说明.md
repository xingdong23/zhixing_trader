# é…ç½®æ–‡ä»¶å¯¹æ¯”è¯´æ˜

è¯¦ç»†è§£é‡Š `backtest_config.json` å’Œ `high_frequency.json` çš„åŒºåˆ«å’Œå…³ç³»ã€‚

---

## é…ç½®æ–‡ä»¶å¯¹æ¯”

### 1. backtest_config.json (å›æµ‹é…ç½®)

**ä½ç½®**: `backtest/configs/backtest_config.json`

**èŒè´£**: æ§åˆ¶**å›æµ‹ç³»ç»Ÿæœ¬èº«**çš„è¡Œä¸º

```json
{
  "backtest_name": "é«˜é¢‘ç­–ç•¥å›æµ‹",
  "description": "ETH/USDT é«˜é¢‘çŸ­çº¿ç­–ç•¥å†å²æ•°æ®å›æµ‹",
  
  "data": {
    "source": "data/ETH-USDT-1m-2025.10.23.csv",
    "timeframe": "5m",
    "resample_from": "1m"
  },
  
  "strategy": {
    "name": "high_frequency",
    "config_file": "../app/config/high_frequency.json"
  },
  
  "backtest_settings": {
    "initial_capital": 300.0,
    "window_size": 200,
    "commission_rate": 0.0004,
    "slippage_rate": 0.0001
  },
  
  "output": {
    "result_file": "results/backtest_result_{timestamp}.json",
    "save_trades": true
  }
}
```

**æ§åˆ¶å†…å®¹**:
- ğŸ“Š ä½¿ç”¨å“ªäº›å†å²æ•°æ®
- ğŸ’° åˆå§‹èµ„é‡‘å¤šå°‘
- ğŸ“ˆ å›æµ‹çª—å£å¤§å°
- ğŸ’¸ æ‰‹ç»­è´¹å’Œæ»‘ç‚¹
- ğŸ“ ç»“æœä¿å­˜ä½ç½®
- ğŸ”— ä½¿ç”¨å“ªä¸ªç­–ç•¥é…ç½®

---

### 2. high_frequency.json (ç­–ç•¥é…ç½®)

**ä½ç½®**: `app/config/high_frequency.json`

**èŒè´£**: æ§åˆ¶**äº¤æ˜“ç­–ç•¥æœ¬èº«**çš„è¡Œä¸º

```json
{
  "trading": {
    "symbol": "ETH-USDT-SWAP",
    "capital": 300.0,
    "leverage": 3.0
  },
  
  "indicators": {
    "ema_fast": 20,
    "ema_slow": 50,
    "ema_trend": 200,
    "rsi_period": 14,
    "atr_period": 14
  },
  
  "entry_conditions": {
    "volume_multiplier": 2.0,
    "breakout_confirmation": 0.002,
    "rsi_long_threshold_low": 45,
    "rsi_short_threshold_high": 55
  },
  
  "exit_conditions": {
    "stop_loss_max": 0.010,
    "take_profit_max": 0.025,
    "profit_risk_ratio_max": 2.0
  },
  
  "risk_control": {
    "max_daily_loss": 0.05,
    "max_trades_per_day": 5
  }
}
```

**æ§åˆ¶å†…å®¹**:
- ğŸ“Š æŠ€æœ¯æŒ‡æ ‡å‚æ•°ï¼ˆEMAã€RSIã€ATRï¼‰
- ğŸ¯ å…¥åœºæ¡ä»¶ï¼ˆæˆäº¤é‡ã€çªç ´ç¡®è®¤ï¼‰
- ğŸ›¡ï¸ å‡ºåœºæ¡ä»¶ï¼ˆæ­¢æŸã€æ­¢ç›ˆï¼‰
- âš ï¸ é£é™©æ§åˆ¶ï¼ˆæœ€å¤§äºæŸã€äº¤æ˜“æ¬¡æ•°ï¼‰
- â° æ—¶æ®µè¿‡æ»¤
- ğŸ“ˆ é¡ºåŠ¿æŒæœ‰

---

## è¯¦ç»†å¯¹æ¯”

### é…ç½®å±‚çº§å…³ç³»

```
backtest_config.json (å›æµ‹å±‚)
    â†“ å¼•ç”¨
high_frequency.json (ç­–ç•¥å±‚)
```

**å…³ç³»**:
- `backtest_config.json` é€šè¿‡ `strategy.config_file` å¼•ç”¨ç­–ç•¥é…ç½®
- å›æµ‹é…ç½®æ§åˆ¶"æ€ä¹ˆæµ‹"
- ç­–ç•¥é…ç½®æ§åˆ¶"æ€ä¹ˆäº¤æ˜“"

---

## å‚æ•°å¯¹æ¯”è¡¨

| é…ç½®é¡¹ | backtest_config.json | high_frequency.json |
|--------|---------------------|---------------------|
| **æ•°æ®æº** | âœ… æ§åˆ¶ | âŒ ä¸æ¶‰åŠ |
| **åˆå§‹èµ„é‡‘** | âœ… æ§åˆ¶ï¼ˆå›æµ‹ç”¨ï¼‰ | âœ… æ§åˆ¶ï¼ˆå®ç›˜ç”¨ï¼‰ |
| **æ æ†** | âŒ ä¸æ¶‰åŠ | âœ… æ§åˆ¶ |
| **æŠ€æœ¯æŒ‡æ ‡** | âŒ ä¸æ¶‰åŠ | âœ… æ§åˆ¶ |
| **å…¥åœºæ¡ä»¶** | âŒ ä¸æ¶‰åŠ | âœ… æ§åˆ¶ |
| **å‡ºåœºæ¡ä»¶** | âŒ ä¸æ¶‰åŠ | âœ… æ§åˆ¶ |
| **é£é™©æ§åˆ¶** | âŒ ä¸æ¶‰åŠ | âœ… æ§åˆ¶ |
| **æ‰‹ç»­è´¹** | âœ… æ§åˆ¶ï¼ˆå›æµ‹æ¨¡æ‹Ÿï¼‰ | âŒ ä¸æ¶‰åŠ |
| **æ»‘ç‚¹** | âœ… æ§åˆ¶ï¼ˆå›æµ‹æ¨¡æ‹Ÿï¼‰ | âŒ ä¸æ¶‰åŠ |
| **çª—å£å¤§å°** | âœ… æ§åˆ¶ | âŒ ä¸æ¶‰åŠ |
| **ç»“æœè¾“å‡º** | âœ… æ§åˆ¶ | âŒ ä¸æ¶‰åŠ |

---

## ä½¿ç”¨åœºæ™¯å¯¹æ¯”

### åœºæ™¯1: å›æµ‹å†å²æ•°æ®

**ä½¿ç”¨**: `backtest_config.json` + `high_frequency.json`

```bash
# è¿è¡Œå›æµ‹
python backtest/run_backtest.py --config backtest/configs/backtest_config.json
```

**æµç¨‹**:
```
1. è¯»å– backtest_config.json
   â”œâ”€ åŠ è½½å†å²æ•°æ®: data/ETH-USDT-1m-2025.10.23.csv
   â”œâ”€ è®¾ç½®åˆå§‹èµ„é‡‘: 300 USDT
   â””â”€ å¼•ç”¨ç­–ç•¥é…ç½®: ../app/config/high_frequency.json

2. è¯»å– high_frequency.json
   â”œâ”€ åŠ è½½ç­–ç•¥å‚æ•°: EMAã€RSIã€ATR
   â”œâ”€ åŠ è½½å…¥åœºæ¡ä»¶
   â”œâ”€ åŠ è½½å‡ºåœºæ¡ä»¶
   â””â”€ åŠ è½½é£é™©æ§åˆ¶

3. è¿è¡Œå›æµ‹
   â””â”€ ä½¿ç”¨ç­–ç•¥å‚æ•°åˆ†æå†å²æ•°æ®
```

---

### åœºæ™¯2: å®ç›˜/æ¨¡æ‹Ÿç›˜äº¤æ˜“

**ä½¿ç”¨**: åªç”¨ `high_frequency.json`

```bash
# è¿è¡Œå®ç›˜
python app/run/high_frequency.py --mode paper
```

**æµç¨‹**:
```
1. è¯»å– high_frequency.json
   â”œâ”€ è¿æ¥äº¤æ˜“æ‰€
   â”œâ”€ åŠ è½½ç­–ç•¥å‚æ•°
   â”œâ”€ å®æ—¶è·å–å¸‚åœºæ•°æ®
   â””â”€ æ‰§è¡Œäº¤æ˜“

2. ä¸éœ€è¦ backtest_config.json
   â””â”€ å› ä¸ºä¸æ˜¯å›æµ‹ï¼Œæ˜¯å®æ—¶äº¤æ˜“
```

---

## ä¸ºä»€ä¹ˆè¦åˆ†å¼€ï¼Ÿ

### åŸå› 1: èŒè´£åˆ†ç¦»

**å›æµ‹é…ç½®** (backtest_config.json):
- å…³æ³¨"æµ‹è¯•ç¯å¢ƒ"
- å¯ä»¥æµ‹è¯•ä¸åŒæ•°æ®é›†
- å¯ä»¥æµ‹è¯•ä¸åŒèµ„é‡‘é‡
- å¯ä»¥æµ‹è¯•ä¸åŒæˆæœ¬å‡è®¾

**ç­–ç•¥é…ç½®** (high_frequency.json):
- å…³æ³¨"äº¤æ˜“é€»è¾‘"
- å®šä¹‰å¦‚ä½•åˆ¤æ–­å…¥åœº
- å®šä¹‰å¦‚ä½•åˆ¤æ–­å‡ºåœº
- å®šä¹‰é£é™©æ§åˆ¶è§„åˆ™

---

### åŸå› 2: çµæ´»æ€§

**åŒä¸€ä¸ªç­–ç•¥ï¼Œä¸åŒçš„å›æµ‹åœºæ™¯**:

```bash
# æµ‹è¯•å•æ—¥æ•°æ®
python backtest/run_backtest.py --config configs/single_day.json

# æµ‹è¯•ä¸€å‘¨æ•°æ®
python backtest/run_backtest.py --config configs/one_week.json

# æµ‹è¯•æ•´æœˆæ•°æ®
python backtest/run_backtest.py --config configs/one_month.json
```

æ‰€æœ‰å›æµ‹éƒ½ä½¿ç”¨**åŒä¸€ä¸ªç­–ç•¥é…ç½®** `high_frequency.json`ï¼Œåªæ˜¯æ•°æ®æºä¸åŒã€‚

---

### åŸå› 3: å¤ç”¨æ€§

**ç­–ç•¥é…ç½®å¯ä»¥åœ¨å¤šä¸ªåœ°æ–¹ä½¿ç”¨**:

```
high_frequency.json
    â”œâ”€ å›æµ‹ç³»ç»Ÿä½¿ç”¨
    â”œâ”€ æ¨¡æ‹Ÿç›˜ä½¿ç”¨
    â””â”€ å®ç›˜ä½¿ç”¨
```

**å›æµ‹é…ç½®åªåœ¨å›æµ‹æ—¶ä½¿ç”¨**:

```
backtest_config.json
    â””â”€ ä»…å›æµ‹ç³»ç»Ÿä½¿ç”¨
```

---

## é…ç½®ä¿®æ”¹æŒ‡å—

### æƒ³æ”¹å˜ç­–ç•¥è¡Œä¸ºï¼Ÿ

**ä¿®æ”¹**: `high_frequency.json`

```json
{
  "entry_conditions": {
    "volume_multiplier": 1.5,        // æ”¹ï¼šé™ä½æˆäº¤é‡è¦æ±‚
    "breakout_confirmation": 0.001   // æ”¹ï¼šé™ä½çªç ´ç¡®è®¤
  }
}
```

**å½±å“**: 
- âœ… å›æµ‹ä¼šä½¿ç”¨æ–°å‚æ•°
- âœ… å®ç›˜ä¼šä½¿ç”¨æ–°å‚æ•°
- âœ… æ¨¡æ‹Ÿç›˜ä¼šä½¿ç”¨æ–°å‚æ•°

---

### æƒ³æ”¹å˜å›æµ‹è®¾ç½®ï¼Ÿ

**ä¿®æ”¹**: `backtest_config.json`

```json
{
  "data": {
    "source": "data/ETH-USDT-*.csv"  // æ”¹ï¼šä½¿ç”¨å¤šä¸ªæ–‡ä»¶
  },
  "backtest_settings": {
    "initial_capital": 1000.0        // æ”¹ï¼šå¢åŠ åˆå§‹èµ„é‡‘
  }
}
```

**å½±å“**:
- âœ… åªå½±å“å›æµ‹
- âŒ ä¸å½±å“å®ç›˜
- âŒ ä¸å½±å“ç­–ç•¥é€»è¾‘

---

## å®é™…ä¾‹å­

### ä¾‹å­1: æµ‹è¯•ä¸åŒèµ„é‡‘é‡

**éœ€æ±‚**: æµ‹è¯•ç­–ç•¥åœ¨ä¸åŒèµ„é‡‘ä¸‹çš„è¡¨ç°

**æ–¹æ¡ˆ**: åˆ›å»ºå¤šä¸ªå›æµ‹é…ç½®ï¼Œä½¿ç”¨åŒä¸€ä¸ªç­–ç•¥é…ç½®

```bash
# configs/capital_100.json
{
  "backtest_settings": {
    "initial_capital": 100.0
  },
  "strategy": {
    "config_file": "../app/config/high_frequency.json"
  }
}

# configs/capital_500.json
{
  "backtest_settings": {
    "initial_capital": 500.0
  },
  "strategy": {
    "config_file": "../app/config/high_frequency.json"
  }
}

# configs/capital_1000.json
{
  "backtest_settings": {
    "initial_capital": 1000.0
  },
  "strategy": {
    "config_file": "../app/config/high_frequency.json"
  }
}
```

**è¿è¡Œ**:
```bash
python backtest/run_backtest.py --config configs/capital_100.json
python backtest/run_backtest.py --config configs/capital_500.json
python backtest/run_backtest.py --config configs/capital_1000.json
```

**ç»“æœ**: åŒä¸€ä¸ªç­–ç•¥ï¼Œä¸‰ç§èµ„é‡‘é‡çš„å›æµ‹ç»“æœ

---

### ä¾‹å­2: æµ‹è¯•ä¸åŒç­–ç•¥å‚æ•°

**éœ€æ±‚**: æµ‹è¯•ä¸åŒçš„æ­¢æŸæ­¢ç›ˆè®¾ç½®

**æ–¹æ¡ˆ**: åˆ›å»ºå¤šä¸ªç­–ç•¥é…ç½®ï¼Œä½¿ç”¨åŒä¸€ä¸ªå›æµ‹é…ç½®

```bash
# config/conservative.json (ä¿å®ˆ)
{
  "exit_conditions": {
    "stop_loss_max": 0.008,
    "take_profit_max": 0.020
  }
}

# config/balanced.json (å¹³è¡¡)
{
  "exit_conditions": {
    "stop_loss_max": 0.010,
    "take_profit_max": 0.025
  }
}

# config/aggressive.json (æ¿€è¿›)
{
  "exit_conditions": {
    "stop_loss_max": 0.015,
    "take_profit_max": 0.035
  }
}
```

**å›æµ‹é…ç½®**:
```json
{
  "strategy": {
    "config_file": "../app/config/conservative.json"  // åˆ‡æ¢è¿™é‡Œ
  }
}
```

---

## é…ç½®æ–‡ä»¶å…³ç³»å›¾

```
é¡¹ç›®ç»“æ„
â”‚
â”œâ”€â”€ backtest/
â”‚   â”œâ”€â”€ configs/
â”‚   â”‚   â”œâ”€â”€ backtest_config.json          â† å›æµ‹é…ç½®
â”‚   â”‚   â”œâ”€â”€ single_day.json               â† å•æ—¥å›æµ‹
â”‚   â”‚   â”œâ”€â”€ one_week.json                 â† ä¸€å‘¨å›æµ‹
â”‚   â”‚   â””â”€â”€ one_month.json                â† æ•´æœˆå›æµ‹
â”‚   â”‚
â”‚   â””â”€â”€ run_backtest.py                   â† å›æµ‹ç¨‹åº
â”‚
â””â”€â”€ app/
    â”œâ”€â”€ config/
    â”‚   â”œâ”€â”€ high_frequency.json           â† ç­–ç•¥é…ç½®
    â”‚   â”œâ”€â”€ conservative.json             â† ä¿å®ˆç­–ç•¥
    â”‚   â””â”€â”€ aggressive.json               â† æ¿€è¿›ç­–ç•¥
    â”‚
    â””â”€â”€ run/
        â””â”€â”€ high_frequency.py             â† å®ç›˜ç¨‹åº
```

**å…³ç³»**:
- å›æµ‹ç¨‹åºè¯»å– `backtest_config.json`
- `backtest_config.json` å¼•ç”¨ `high_frequency.json`
- å®ç›˜ç¨‹åºç›´æ¥è¯»å– `high_frequency.json`

---

## æ€»ç»“

### backtest_config.json

**ä½œç”¨**: æ§åˆ¶å›æµ‹ç¯å¢ƒ  
**åŒ…å«**: æ•°æ®æºã€åˆå§‹èµ„é‡‘ã€çª—å£å¤§å°ã€æˆæœ¬æ¨¡æ‹Ÿ  
**ä½¿ç”¨**: ä»…å›æµ‹æ—¶ä½¿ç”¨  
**ä¿®æ”¹å½±å“**: åªå½±å“å›æµ‹è¡Œä¸º

### high_frequency.json

**ä½œç”¨**: æ§åˆ¶äº¤æ˜“ç­–ç•¥  
**åŒ…å«**: æŒ‡æ ‡å‚æ•°ã€å…¥åœºæ¡ä»¶ã€å‡ºåœºæ¡ä»¶ã€é£é™©æ§åˆ¶  
**ä½¿ç”¨**: å›æµ‹ã€æ¨¡æ‹Ÿç›˜ã€å®ç›˜éƒ½ä½¿ç”¨  
**ä¿®æ”¹å½±å“**: å½±å“æ‰€æœ‰äº¤æ˜“è¡Œä¸º

### å…³é”®åŒºåˆ«

| ç»´åº¦ | backtest_config.json | high_frequency.json |
|------|---------------------|---------------------|
| **å±‚çº§** | å›æµ‹å±‚ | ç­–ç•¥å±‚ |
| **èŒè´£** | æ€ä¹ˆæµ‹ | æ€ä¹ˆäº¤æ˜“ |
| **èŒƒå›´** | ä»…å›æµ‹ | å›æµ‹+å®ç›˜ |
| **å…³æ³¨ç‚¹** | æµ‹è¯•ç¯å¢ƒ | äº¤æ˜“é€»è¾‘ |

### è®°å¿†å£è¯€

```
å›æµ‹é…ç½®ç®¡ç¯å¢ƒï¼Œç­–ç•¥é…ç½®ç®¡äº¤æ˜“
å›æµ‹åªç”¨å›æµ‹é…ï¼Œå®ç›˜åªç”¨ç­–ç•¥é…
ä¸¤è€…åˆ†å·¥å¾ˆæ˜ç¡®ï¼Œä¿®æ”¹å½±å“è¦æ¸…æ¥š
```

---

æ›´æ–°æ—¶é—´: 2025-10-25 21:04
