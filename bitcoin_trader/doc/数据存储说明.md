# æ•°æ®å­˜å‚¨è¯´æ˜

## å½“å‰çŠ¶æ€ï¼šæ²¡æœ‰æ•°æ®åº“ âŒ

ç›®å‰çš„ç­–ç•¥**ä¸ä¼š**å°†äº¤æ˜“æ•°æ®æ’å…¥æ•°æ®åº“ã€‚æ‰€æœ‰æ•°æ®éƒ½å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚

## å½“å‰æ•°æ®å­˜å‚¨æ–¹å¼

### 1. å†…å­˜å­˜å‚¨
äº¤æ˜“æ•°æ®å­˜å‚¨åœ¨Pythonå¯¹è±¡çš„å±æ€§ä¸­ï¼š

```python
class HighFrequencyScalpingStrategy:
    def __init__(self):
        self.daily_trades = []  # ä»Šæ—¥äº¤æ˜“åˆ—è¡¨ï¼ˆå†…å­˜ï¼‰
        self.daily_pnl = 0.0    # ä»Šæ—¥ç›ˆäºï¼ˆå†…å­˜ï¼‰
        self.current_position = None  # å½“å‰æŒä»“ï¼ˆå†…å­˜ï¼‰
```

### 2. æ—¥å¿—æ–‡ä»¶
äº¤æ˜“ä¿¡æ¯ä¼šè®°å½•åˆ°æ—¥å¿—æ–‡ä»¶ï¼š

```
logs/high_frequency_20251025.log
```

æ—¥å¿—å†…å®¹ç¤ºä¾‹ï¼š
```
2025-10-25 19:34:08,497 - __main__ - INFO - âœ“ [æ¨¡æ‹Ÿç›˜] åšå¤šå¼€ä»“æˆåŠŸ: {...}
2025-10-25 19:34:08,497 - __main__ - INFO - è®°å½•äº¤æ˜“: {...}
2025-10-25 19:34:08,497 - __main__ - INFO - ğŸ“Š ç­–ç•¥ç»Ÿè®¡: ä»Šæ—¥äº¤æ˜“=1, èƒœç‡=100.0%, ç›ˆäº=5.50 USDT
```

## æ•°æ®ç”Ÿå‘½å‘¨æœŸ

### âš ï¸ ç¨‹åºé‡å¯åæ•°æ®ä¸¢å¤±
- æ‰€æœ‰äº¤æ˜“è®°å½•åœ¨å†…å­˜ä¸­
- ç¨‹åºåœæ­¢åæ•°æ®æ¸…ç©º
- é‡å¯åä»é›¶å¼€å§‹

### âš ï¸ æ¯æ—¥é‡ç½®
- æ¯å¤©0ç‚¹è‡ªåŠ¨é‡ç½®ç»Ÿè®¡
- `daily_trades` æ¸…ç©º
- `daily_pnl` å½’é›¶
- è¿ç»­äºæŸæ¬¡æ•°é‡ç½®

## å½“å‰è®°å½•çš„æ•°æ®

### ç­–ç•¥è®°å½•
```python
def record_trade(self, signal: Dict[str, Any]):
    trade = {
        "timestamp": datetime.now(),
        "signal": signal["signal"],      # buy/sell
        "price": signal["price"],        # ä»·æ ¼
        "amount": signal.get("amount", 0),  # æ•°é‡
        "type": signal.get("type", "entry"),  # entry/exit
        "pnl": signal.get("pnl", 0),     # ç›ˆäº
        "reason": signal.get("reason", "")  # åŸå› 
    }
    self.daily_trades.append(trade)  # åªå­˜åœ¨å†…å­˜ä¸­
```

### é£é™©ç®¡ç†å™¨è®°å½•
```python
def record_trade(self, trade: Dict[str, Any]):
    self.daily_trades.append({
        "timestamp": datetime.now(),
        "symbol": trade["symbol"],
        "side": trade["side"],
        "amount": trade["amount"],
        "price": trade["price"],
        "pnl": trade.get("pnl", 0)
    })
    # ä¹Ÿåªå­˜åœ¨å†…å­˜ä¸­
```

## å¦‚æœéœ€è¦æ•°æ®åº“

### æ–¹æ¡ˆ1: SQLiteï¼ˆç®€å•ï¼‰
é€‚åˆä¸ªäººä½¿ç”¨ï¼Œæ•°æ®å­˜å‚¨åœ¨æœ¬åœ°æ–‡ä»¶

```python
import sqlite3

def init_database():
    conn = sqlite3.connect('trades.db')
    cursor = conn.cursor()
    cursor.execute('''
        CREATE TABLE IF NOT EXISTS trades (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            timestamp DATETIME,
            symbol TEXT,
            signal TEXT,
            price REAL,
            amount REAL,
            pnl REAL,
            reason TEXT
        )
    ''')
    conn.commit()
    conn.close()

def save_trade_to_db(trade):
    conn = sqlite3.connect('trades.db')
    cursor = conn.cursor()
    cursor.execute('''
        INSERT INTO trades (timestamp, symbol, signal, price, amount, pnl, reason)
        VALUES (?, ?, ?, ?, ?, ?, ?)
    ''', (
        trade['timestamp'],
        trade['symbol'],
        trade['signal'],
        trade['price'],
        trade['amount'],
        trade['pnl'],
        trade['reason']
    ))
    conn.commit()
    conn.close()
```

### æ–¹æ¡ˆ2: PostgreSQLï¼ˆä¸“ä¸šï¼‰
é€‚åˆç”Ÿäº§ç¯å¢ƒï¼Œæ”¯æŒé«˜å¹¶å‘

```python
import psycopg2

def save_trade_to_postgres(trade):
    conn = psycopg2.connect(
        host="localhost",
        database="trading",
        user="trader",
        password="password"
    )
    cursor = conn.cursor()
    cursor.execute('''
        INSERT INTO trades (timestamp, symbol, signal, price, amount, pnl, reason)
        VALUES (%s, %s, %s, %s, %s, %s, %s)
    ''', (
        trade['timestamp'],
        trade['symbol'],
        trade['signal'],
        trade['price'],
        trade['amount'],
        trade['pnl'],
        trade['reason']
    ))
    conn.commit()
    cursor.close()
    conn.close()
```

### æ–¹æ¡ˆ3: CSVæ–‡ä»¶ï¼ˆæœ€ç®€å•ï¼‰
é€‚åˆå¿«é€Ÿè®°å½•å’ŒExcelåˆ†æ

```python
import csv
from datetime import datetime

def save_trade_to_csv(trade):
    filename = f"trades_{datetime.now().strftime('%Y%m%d')}.csv"
    
    # æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
    file_exists = os.path.isfile(filename)
    
    with open(filename, 'a', newline='') as f:
        writer = csv.DictWriter(f, fieldnames=[
            'timestamp', 'symbol', 'signal', 'price', 'amount', 'pnl', 'reason'
        ])
        
        # å¦‚æœæ˜¯æ–°æ–‡ä»¶ï¼Œå†™å…¥è¡¨å¤´
        if not file_exists:
            writer.writeheader()
        
        writer.writerow(trade)
```

## ä¼˜ç¼ºç‚¹å¯¹æ¯”

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ |
|------|------|------|---------|
| å†…å­˜ï¼ˆå½“å‰ï¼‰ | ç®€å•å¿«é€Ÿ | æ•°æ®ä¸¢å¤± | æµ‹è¯•é˜¶æ®µ |
| æ—¥å¿—æ–‡ä»¶ | è‡ªåŠ¨è®°å½• | éš¾ä»¥æŸ¥è¯¢ | è°ƒè¯•åˆ†æ |
| CSVæ–‡ä»¶ | ç®€å•æ˜“ç”¨ | æ€§èƒ½è¾ƒä½ | ä¸ªäººä½¿ç”¨ |
| SQLite | è½»é‡çº§ | å•æœºä½¿ç”¨ | ä¸ªäºº/å°å‹ |
| PostgreSQL | åŠŸèƒ½å¼ºå¤§ | é…ç½®å¤æ‚ | ç”Ÿäº§ç¯å¢ƒ |

## å»ºè®®

### å½“å‰é˜¶æ®µï¼ˆæµ‹è¯•ï¼‰
âœ… **ä¿æŒç°çŠ¶**
- å†…å­˜å­˜å‚¨è¶³å¤Ÿ
- æ—¥å¿—æ–‡ä»¶å¯æŸ¥çœ‹
- ç®€å•é«˜æ•ˆ

### å¦‚æœéœ€è¦æŒä¹…åŒ–
âœ… **æ¨èCSVæ–‡ä»¶**
- æœ€ç®€å•å®ç°
- å¯ç”¨Excelåˆ†æ
- é€‚åˆä¸ªäººä½¿ç”¨

### å¦‚æœéœ€è¦ä¸“ä¸šåŒ–
âœ… **æ¨èSQLite**
- è½»é‡çº§æ•°æ®åº“
- æ”¯æŒSQLæŸ¥è¯¢
- æ•°æ®æŒä¹…åŒ–

## æ˜¯å¦éœ€è¦æ·»åŠ æ•°æ®åº“ï¼Ÿ

**ç›®å‰ä¸éœ€è¦**ï¼Œå› ä¸ºï¼š
1. âœ… æ—¥å¿—æ–‡ä»¶å·²ç»è®°å½•äº†æ‰€æœ‰ä¿¡æ¯
2. âœ… ç­–ç•¥åœ¨æµ‹è¯•é˜¶æ®µ
3. âœ… æ¯æ—¥ç»Ÿè®¡å·²ç»è¶³å¤Ÿ
4. âœ… ä¿æŒä»£ç ç®€æ´

**å¦‚æœä½ éœ€è¦**ï¼š
- é•¿æœŸæ•°æ®åˆ†æ
- å›æµ‹å†å²äº¤æ˜“
- å¤šç­–ç•¥å¯¹æ¯”
- ç”ŸæˆæŠ¥è¡¨

é‚£ä¹ˆå¯ä»¥è€ƒè™‘æ·»åŠ æ•°æ®åº“åŠŸèƒ½ã€‚

## æŸ¥çœ‹äº¤æ˜“è®°å½•

### æ–¹æ³•1: æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶
```bash
# æŸ¥çœ‹ä»Šå¤©çš„æ—¥å¿—
cat logs/high_frequency_20251025.log

# æœç´¢äº¤æ˜“è®°å½•
grep "åšå¤šå¼€ä»“\|åšç©ºå¼€ä»“" logs/high_frequency_20251025.log

# æœç´¢ç›ˆäº
grep "ç­–ç•¥ç»Ÿè®¡" logs/high_frequency_20251025.log
```

### æ–¹æ³•2: å®æ—¶ç›‘æ§
```bash
# å®æ—¶æŸ¥çœ‹æ—¥å¿—
tail -f logs/high_frequency_20251025.log
```

## æ€»ç»“

âœ… **å½“å‰çŠ¶æ€**
- æ— æ•°æ®åº“
- å†…å­˜å­˜å‚¨
- æ—¥å¿—è®°å½•
- æ¯æ—¥é‡ç½®

âš ï¸ **æ³¨æ„äº‹é¡¹**
- ç¨‹åºé‡å¯æ•°æ®ä¸¢å¤±
- æ¯æ—¥0ç‚¹è‡ªåŠ¨é‡ç½®
- åªèƒ½æŸ¥çœ‹å½“å¤©æ•°æ®

ğŸ“ **å¦‚éœ€æŒä¹…åŒ–**
- å¯ä»¥æ·»åŠ CSVå¯¼å‡º
- å¯ä»¥æ·»åŠ SQLite
- å¯ä»¥æ·»åŠ PostgreSQL

ç›®å‰çš„è®¾è®¡é€‚åˆæµ‹è¯•å’Œä¸ªäººä½¿ç”¨ï¼Œå¦‚æœéœ€è¦æ·»åŠ æ•°æ®åº“åŠŸèƒ½ï¼Œè¯·å‘Šè¯‰æˆ‘ï¼
