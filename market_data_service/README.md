# ğŸ“Š Market Data Service - å¸‚åœºæ•°æ®æœåŠ¡

ç‹¬ç«‹çš„å¸‚åœºæ•°æ®æœåŠ¡æ¨¡å—ï¼Œæä¾›ç»Ÿä¸€çš„æ•°æ®æºæ¥å…¥èƒ½åŠ›ï¼Œæ”¯æŒå†å²æ•°æ®ã€å®æ—¶Kçº¿ã€è‚¡ç¥¨ä¿¡æ¯ç­‰ã€‚

---

## ğŸ“– å¿«é€Ÿå¯¼èˆª

### ğŸš€ å¿«é€Ÿå¼€å§‹
- **[é›†æˆæŒ‡å—](æ–‡æ¡£/å¿«é€Ÿå¼€å§‹/é›†æˆæŒ‡å—.md)** - å¦‚ä½•åœ¨é¡¹ç›®ä¸­é›†æˆæœ¬æœåŠ¡
- **[æ•°æ®æºå‡†å¤‡](æ–‡æ¡£/å¿«é€Ÿå¼€å§‹/æ•°æ®æºå‡†å¤‡.md)** - æ•°æ®æºAPIå¯†é’¥ç”³è¯·
- **[æœ€ç»ˆé…ç½®æ–¹æ¡ˆ](æ–‡æ¡£/å¿«é€Ÿå¼€å§‹/æœ€ç»ˆé…ç½®æ–¹æ¡ˆ.md)** - æ¨èçš„é…ç½®æ–¹æ¡ˆ

### ğŸ”Œ æ•°æ®æºé…ç½®
- **[æ•°æ®æºèƒ½åŠ›å¯¹æ¯”](æ–‡æ¡£/æ•°æ®æºé…ç½®/æ•°æ®æºèƒ½åŠ›å¯¹æ¯”.md)** - å„æ•°æ®æºåŠŸèƒ½å¯¹æ¯”
- **[æ•°æ®æºè°ƒç ”](æ–‡æ¡£/æ•°æ®æºé…ç½®/æ•°æ®æºè°ƒç ”.md)** - æ•°æ®æºè¯¦ç»†è°ƒç ”
- **[å¤šæ•°æ®æºé…ç½®](æ–‡æ¡£/æ•°æ®æºé…ç½®/å¤šæ•°æ®æºé…ç½®.md)** - é…ç½®å¤šä¸ªæ•°æ®æº
- **[AlphaVantageé…ç½®](æ–‡æ¡£/æ•°æ®æºé…ç½®/AlphaVantageé…ç½®.md)** - Alpha Vantageé…ç½®
- **[AlphaVantageä¿¡æ¯](æ–‡æ¡£/æ•°æ®æºé…ç½®/AlphaVantageä¿¡æ¯.md)** - Alpha Vantageè¯¦æƒ…
- **[AlphaVantageé›†æˆ](æ–‡æ¡£/æ•°æ®æºé…ç½®/AlphaVantageé›†æˆ.md)** - é›†æˆæ­¥éª¤
- **[AlphaVantageè¯¦ç»†é…ç½®](æ–‡æ¡£/æ•°æ®æºé…ç½®/AlphaVantageè¯¦ç»†é…ç½®.md)** - è¯¦ç»†é…ç½®è¯´æ˜

### ğŸ“ˆ æµ‹è¯•æŠ¥å‘Š
- **[æ•°æ®æºæµ‹è¯•æŠ¥å‘Š](æ–‡æ¡£/æµ‹è¯•æŠ¥å‘Š/æ•°æ®æºæµ‹è¯•æŠ¥å‘Š.md)** - å®Œæ•´æµ‹è¯•æŠ¥å‘Š
- **[æ•°æ®æºæµ‹è¯•ç»“æœ](æ–‡æ¡£/æµ‹è¯•æŠ¥å‘Š/æ•°æ®æºæµ‹è¯•ç»“æœ.md)** - æµ‹è¯•ç»“æœæ±‡æ€»
- **[AlphaVantageæµ‹è¯•æŠ¥å‘Š](æ–‡æ¡£/æµ‹è¯•æŠ¥å‘Š/AlphaVantageæµ‹è¯•æŠ¥å‘Š.md)** - AVä¸“é¡¹æµ‹è¯•

### ğŸš€ é«˜çº§åŠŸèƒ½
- **[é«˜çº§ä¼˜åŒ–](æ–‡æ¡£/é«˜çº§åŠŸèƒ½/é«˜çº§ä¼˜åŒ–.md)** - æ€§èƒ½ä¼˜åŒ–æŠ€å·§
- **[å¤šè´¦æˆ·æŒ‡å—](æ–‡æ¡£/é«˜çº§åŠŸèƒ½/å¤šè´¦æˆ·æŒ‡å—.md)** - å¤šè´¦æˆ·è´Ÿè½½å‡è¡¡
- **[å¤šæ•°æ®æºæ€»ç»“](æ–‡æ¡£/é«˜çº§åŠŸèƒ½/å¤šæ•°æ®æºæ€»ç»“.md)** - å¤šæºç­–ç•¥æ€»ç»“

---

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### âœ¨ ä¸»è¦åŠŸèƒ½
- âœ… **å¤šæ•°æ®æºæ”¯æŒ** - Yahoo Finance, Alpha Vantage, Twelve Data, Finnhub
- âœ… **æ™ºèƒ½åˆ‡æ¢** - è‡ªåŠ¨æ•…éšœè½¬ç§»ï¼Œè´Ÿè½½å‡è¡¡
- âœ… **ç»Ÿä¸€æ¥å£** - ä¸€è‡´çš„APIï¼Œç®€åŒ–é›†æˆ
- âœ… **é«˜å¯ç”¨æ€§** - å¤šè´¦æˆ·è½®è¯¢ï¼Œçªç ´é™æµ

### ğŸ“Š æ•°æ®ç±»å‹
- **å†å²Kçº¿** - æ—¥çº¿ã€å‘¨çº¿ã€æœˆçº¿ç­‰
- **å®æ—¶æ•°æ®** - å®æ—¶ä»·æ ¼ã€æˆäº¤é‡
- **è‚¡ç¥¨ä¿¡æ¯** - å…¬å¸æ¦‚å†µã€è¡Œä¸šåˆ†ç±»
- **æŠ€æœ¯æŒ‡æ ‡** - å†…ç½®å¸¸ç”¨æŠ€æœ¯æŒ‡æ ‡

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–
```bash
cd market_data_service
pip install -r requirements.txt
```

### 2. é…ç½®APIå¯†é’¥
```bash
# å¤åˆ¶é…ç½®ç¤ºä¾‹
cp env.example .env

# ç¼–è¾‘é…ç½®æ–‡ä»¶
vim .env
```

é…ç½®ç¤ºä¾‹ï¼š
```bash
# Yahoo Financeï¼ˆå…è´¹ï¼Œæ— éœ€å¯†é’¥ï¼‰
YAHOO_FINANCE_ENABLED=true

# Alpha Vantage
ALPHA_VANTAGE_API_KEY_1=your_key_1
ALPHA_VANTAGE_API_KEY_2=your_key_2

# Twelve Data
TWELVE_DATA_API_KEY=your_key

# Finnhub
FINNHUB_API_KEY_1=your_key_1
```

### 3. ä½¿ç”¨ç¤ºä¾‹
```python
from market_data import MarketDataProviderFactory

# åˆ›å»ºæä¾›è€…
provider = MarketDataProviderFactory.create_hybrid_provider()

# è·å–å†å²æ•°æ®
df = provider.get_historical_data("AAPL", period="1y")

# è·å–è‚¡ç¥¨ä¿¡æ¯
info = provider.get_stock_info("AAPL")
```

æ›´å¤šç¤ºä¾‹è§ [examples/](examples/) ç›®å½•

---

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
market_data_service/
â”œâ”€â”€ market_data/              # æ ¸å¿ƒä»£ç 
â”‚   â”œâ”€â”€ providers/            # æ•°æ®æä¾›è€…
â”‚   â”‚   â”œâ”€â”€ yahoo_provider.py        # Yahoo Finance
â”‚   â”‚   â”œâ”€â”€ alphavantage_provider.py # Alpha Vantage
â”‚   â”‚   â”œâ”€â”€ twelvedata_provider.py   # Twelve Data
â”‚   â”‚   â”œâ”€â”€ finnhub_provider.py      # Finnhub
â”‚   â”‚   â”œâ”€â”€ hybrid_provider.py       # æ··åˆç­–ç•¥
â”‚   â”‚   â””â”€â”€ multi_provider.py        # å¤šæºç­–ç•¥
â”‚   â””â”€â”€ __init__.py           # å¯¼å‡ºæ¥å£
â”œâ”€â”€ examples/                 # ä½¿ç”¨ç¤ºä¾‹
â”‚   â”œâ”€â”€ quick_start.py        # å¿«é€Ÿå¼€å§‹
â”‚   â””â”€â”€ advanced_usage.py     # é«˜çº§ç”¨æ³•
â”œâ”€â”€ æ–‡æ¡£/                     # ğŸ“š é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ å¿«é€Ÿå¼€å§‹/
â”‚   â”œâ”€â”€ æ•°æ®æºé…ç½®/
â”‚   â”œâ”€â”€ æµ‹è¯•æŠ¥å‘Š/
â”‚   â””â”€â”€ é«˜çº§åŠŸèƒ½/
â”œâ”€â”€ config.py                 # é…ç½®ç®¡ç†
â”œâ”€â”€ requirements.txt          # ä¾èµ–åˆ—è¡¨
â””â”€â”€ README.md                 # æœ¬æ–‡ä»¶
```

---

## ğŸ”Œ æ”¯æŒçš„æ•°æ®æº

### Yahoo Finance â­â­â­â­â­
- **ä¼˜ç‚¹**: å…è´¹ã€ç¨³å®šã€æ•°æ®å…¨
- **é™åˆ¶**: æœ‰æ—¶ä¼šè¢«é™æµ
- **æ¨è**: ä½œä¸ºä¸»è¦æ•°æ®æº

### Alpha Vantage â­â­â­â­
- **ä¼˜ç‚¹**: æ•°æ®å‡†ç¡®ã€APIå®Œå–„
- **é™åˆ¶**: å…è´¹ç‰ˆ 25è¯·æ±‚/å¤©
- **æ¨è**: ä½œä¸ºå¤‡ç”¨æ•°æ®æº

### Twelve Data â­â­â­â­
- **ä¼˜ç‚¹**: æ•°æ®è´¨é‡é«˜ã€é™æµè¾ƒå®½æ¾
- **é™åˆ¶**: å…è´¹ç‰ˆ 800è¯·æ±‚/å¤©
- **æ¨è**: ä½œä¸ºè¡¥å……æ•°æ®æº

### Finnhub â­â­â­
- **ä¼˜ç‚¹**: å®æ—¶æ•°æ®å¿«
- **é™åˆ¶**: å…è´¹ç‰ˆåŠŸèƒ½æœ‰é™
- **æ¨è**: ç”¨äºå®æ—¶æ•°æ®

è¯¦ç»†å¯¹æ¯”è§ [æ•°æ®æºèƒ½åŠ›å¯¹æ¯”](æ–‡æ¡£/æ•°æ®æºé…ç½®/æ•°æ®æºèƒ½åŠ›å¯¹æ¯”.md)

---

## ğŸ® ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€ç”¨æ³•
```python
from market_data import YahooFinanceProvider

# åˆ›å»ºæä¾›è€…
provider = YahooFinanceProvider()

# è·å–å†å²æ•°æ®
df = provider.get_historical_data(
    symbol="AAPL",
    period="1mo",
    interval="1d"
)

# è·å–å®æ—¶ä»·æ ¼
price = provider.get_realtime_price("AAPL")
```

### æ··åˆç­–ç•¥ï¼ˆæ¨èï¼‰
```python
from market_data import MarketDataProviderFactory

# åˆ›å»ºæ··åˆç­–ç•¥æä¾›è€…
provider = MarketDataProviderFactory.create_hybrid_provider()

# è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜æ•°æ®æº
df = provider.get_historical_data("AAPL", period="1y")
info = provider.get_stock_info("AAPL")
```

### å¤šè´¦æˆ·è´Ÿè½½å‡è¡¡
```python
from market_data import MultiAccountProvider

# é…ç½®å¤šä¸ªAPIå¯†é’¥
provider = MultiAccountProvider(
    provider_type="alphavantage",
    api_keys=["key1", "key2", "key3"]
)

# è‡ªåŠ¨è½®è¯¢ä½¿ç”¨ä¸åŒè´¦æˆ·
for symbol in ["AAPL", "GOOGL", "MSFT"]:
    data = provider.get_historical_data(symbol)
```

æ›´å¤šç¤ºä¾‹è§ [examples/](examples/) ç›®å½•

---

## âš™ï¸ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡
```bash
# æ•°æ®æºå¼€å…³
YAHOO_FINANCE_ENABLED=true
ALPHA_VANTAGE_ENABLED=true
TWELVE_DATA_ENABLED=true
FINNHUB_ENABLED=true

# APIå¯†é’¥ï¼ˆå¤šè´¦æˆ·ï¼‰
ALPHA_VANTAGE_API_KEY_1=xxx
ALPHA_VANTAGE_API_KEY_2=xxx
TWELVE_DATA_API_KEY=xxx
FINNHUB_API_KEY_1=xxx
FINNHUB_API_KEY_2=xxx

# ä¼˜å…ˆçº§é…ç½®
PRIMARY_PROVIDER=yahoo
FALLBACK_PROVIDERS=alphavantage,twelvedata
```

è¯¦ç»†é…ç½®è§ [æœ€ç»ˆé…ç½®æ–¹æ¡ˆ](æ–‡æ¡£/å¿«é€Ÿå¼€å§‹/æœ€ç»ˆé…ç½®æ–¹æ¡ˆ.md)

---

## ğŸ”„ æ™ºèƒ½åˆ‡æ¢ç­–ç•¥

### åœºæ™¯è·¯ç”±
ç³»ç»Ÿæ ¹æ®ä¸åŒåœºæ™¯è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜æ•°æ®æºï¼š

| åœºæ™¯ | ä¼˜å…ˆæ•°æ®æº | å¤‡ç”¨æ•°æ®æº |
|------|-----------|----------|
| å†å²Kçº¿ | Yahoo Finance | Alpha Vantage |
| è‚¡ç¥¨ä¿¡æ¯ | Alpha Vantage | Twelve Data |
| å®æ—¶æ•°æ® | Finnhub | Yahoo Finance |
| æ‰¹é‡æŸ¥è¯¢ | å¤šè´¦æˆ·è½®è¯¢ | æ··åˆç­–ç•¥ |

### æ•…éšœè½¬ç§»
- è‡ªåŠ¨æ£€æµ‹APIé”™è¯¯
- è‡ªåŠ¨åˆ‡æ¢åˆ°å¤‡ç”¨æ•°æ®æº
- è®°å½•å¤±è´¥æ¬¡æ•°ï¼Œæ™ºèƒ½é™çº§

è¯¦è§ [é«˜çº§ä¼˜åŒ–](æ–‡æ¡£/é«˜çº§åŠŸèƒ½/é«˜çº§ä¼˜åŒ–.md)

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### ç¼“å­˜ç­–ç•¥
```python
# å¯ç”¨ç¼“å­˜
provider = YahooFinanceProvider(enable_cache=True)

# å†å²æ•°æ®ç¼“å­˜1å°æ—¶
df = provider.get_historical_data("AAPL", cache_ttl=3600)
```

### æ‰¹é‡è¯·æ±‚
```python
# æ‰¹é‡è·å–å¤šåªè‚¡ç¥¨
symbols = ["AAPL", "GOOGL", "MSFT"]
data = provider.get_batch_data(symbols)
```

### å¹¶å‘æ§åˆ¶
```python
# æ§åˆ¶å¹¶å‘æ•°ï¼Œé¿å…é™æµ
provider = MultiAccountProvider(
    max_concurrent=5,
    rate_limit=10  # 10è¯·æ±‚/ç§’
)
```

---

## ğŸ§ª æµ‹è¯•

### è¿è¡Œæµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest tests/

# æµ‹è¯•ç‰¹å®šæ•°æ®æº
pytest tests/test_yahoo.py
pytest tests/test_alphavantage.py
```

### æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š
- [æ•°æ®æºæµ‹è¯•æŠ¥å‘Š](æ–‡æ¡£/æµ‹è¯•æŠ¥å‘Š/æ•°æ®æºæµ‹è¯•æŠ¥å‘Š.md)
- [æµ‹è¯•ç»“æœæ±‡æ€»](æ–‡æ¡£/æµ‹è¯•æŠ¥å‘Š/æ•°æ®æºæµ‹è¯•ç»“æœ.md)

---

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°æ•°æ®æº
```python
from market_data.providers.base import BaseProvider

class NewProvider(BaseProvider):
    def get_historical_data(self, symbol, **kwargs):
        # å®ç°ä½ çš„é€»è¾‘
        pass
    
    def get_stock_info(self, symbol):
        # å®ç°ä½ çš„é€»è¾‘
        pass
```

### é›†æˆåˆ°é¡¹ç›®
è¯¦è§ [é›†æˆæŒ‡å—](æ–‡æ¡£/å¿«é€Ÿå¼€å§‹/é›†æˆæŒ‡å—.md)

---

## ğŸ’° æˆæœ¬ä¼°ç®—

### å…è´¹æ–¹æ¡ˆï¼ˆæ¨èï¼‰
- Yahoo Finance: æ— é™åˆ¶
- Alpha Vantage: 25è¯·æ±‚/å¤©ï¼ˆå¤šè´¦æˆ·æ‰©å±•ï¼‰
- Twelve Data: 800è¯·æ±‚/å¤©
- **æ€»æˆæœ¬**: $0/æœˆ

### ä»˜è´¹æ–¹æ¡ˆ
- Alpha Vantage Pro: $49.99/æœˆ
- Twelve Data Pro: $79/æœˆ
- Finnhub Pro: $59/æœˆ

è¯¦è§ [æ•°æ®æºè°ƒç ”](æ–‡æ¡£/æ•°æ®æºé…ç½®/æ•°æ®æºè°ƒç ”.md)

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

### è´¡çŒ®æŒ‡å—
1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯
3. æäº¤ä»£ç 
4. å‘èµ· Pull Request

---

## ğŸ“„ è®¸å¯è¯

MIT License

---

## ğŸ“ è·å–å¸®åŠ©

- æŸ¥çœ‹ [é›†æˆæŒ‡å—](æ–‡æ¡£/å¿«é€Ÿå¼€å§‹/é›†æˆæŒ‡å—.md)
- é˜…è¯» [æ•°æ®æºé…ç½®](æ–‡æ¡£/æ•°æ®æºé…ç½®/)
- å‚è€ƒ [ä½¿ç”¨ç¤ºä¾‹](examples/)

---

**ç‹¬ç«‹æ¨¡å—**: æœ¬æ¨¡å—å¯ç‹¬ç«‹ä½¿ç”¨ï¼Œä¹Ÿå¯é›†æˆåˆ°å…¶ä»–é¡¹ç›®ä¸­ã€‚
