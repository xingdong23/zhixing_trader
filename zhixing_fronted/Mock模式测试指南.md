# Mock模式测试指南

## 🎯 测试目标
验证分类管理和数据同步功能在**不依赖后端API**的情况下完全正常运行。

## 🌐 访问地址
```
http://localhost:3000
```

## 📋 测试清单

### ✅ 分类管理测试

#### 1. 进入分类页面
- [ ] 点击左侧菜单 "分类"
- [ ] 确认看到 "🎭 Mock模式 - 不调用后端API" 提示
- [ ] 确认看到3个统计卡片(总分类数、顶级分类、总股票数)
- [ ] 确认看到2个初始分类: "行业板块"、"交易策略"

#### 2. 查看初始数据
- [ ] 展开 "行业板块" → 看到 "科技股"(💻) 和 "能源"(⚡)
- [ ] 展开 "交易策略" → 看到 "长线持有"(📈)
- [ ] 确认股票数量显示正确

#### 3. 创建顶级分类
- [ ] 点击右上角 "创建分类" 按钮
- [ ] 输入名称: "我的自选"
- [ ] 选择图标: 任意emoji
- [ ] 选择颜色: 任意颜色
- [ ] 点击 "创建"
- [ ] **预期**: 看到Toast "✅ 分类创建成功 (Mock模式)"
- [ ] **预期**: 列表中出现新分类 "我的自选"

#### 4. 创建子分类
- [ ] 再次点击 "创建分类"
- [ ] 输入名称: "短线机会"
- [ ] 选择父分类: "我的自选"
- [ ] 选择图标和颜色
- [ ] 点击 "创建"
- [ ] **预期**: Toast提示成功
- [ ] **预期**: "我的自选" 下出现子分类 "短线机会"

#### 5. 编辑分类
- [ ] 点击任一分类的 "编辑" 按钮(铅笔图标)
- [ ] 修改名称: 在原名称后加 " - 已编辑"
- [ ] 修改颜色或图标
- [ ] 点击 "更新"
- [ ] **预期**: Toast "✅ 分类更新成功 (Mock模式)"
- [ ] **预期**: 列表中显示更新后的内容

#### 6. 删除分类
- [ ] 点击刚创建的分类的 "删除" 按钮(垃圾桶图标)
- [ ] 在确认对话框点击 "确定"
- [ ] **预期**: Toast "✅ 分类删除成功 (Mock模式)"
- [ ] **预期**: 该分类从列表中消失

#### 7. 树形结构交互
- [ ] 点击分类前的 ">" 图标,收起子节点
- [ ] **预期**: 子节点隐藏,图标变为 ">"
- [ ] 再次点击,展开子节点
- [ ] **预期**: 子节点显示,图标变为 "∨"

### ✅ 数据同步按钮测试 (券商页面)

#### 1. 进入券商页面
- [ ] 点击左侧菜单 "券商"
- [ ] 滚动到页面底部
- [ ] 找到 "数据同步" 区域
- [ ] 确认看到 "🎭 Mock模式 - 不调用后端API" 提示

#### 2. 查看上次同步记录
- [ ] 确认显示 "上次同步: [某个时间]"
- [ ] 确认显示同步结果统计:
  - 总计: 150 股票
  - 成功: 148
  - 失败: 2
  - 记录: 150
  - 耗时: 60秒

#### 3. 测试增量同步
- [ ] 点击 "增量同步" 按钮
- [ ] **预期**: Toast "🔄 开始增量同步 (Mock模式)"
- [ ] **预期**: 显示进度条,从 0% 开始
- [ ] **预期**: 进度实时更新: 0% → 10% → 20% → ... → 100%
- [ ] **预期**: 显示处理进度: "15 / 150 股票" → "30 / 150 股票" → ...
- [ ] **预期**: 3秒后完成,Toast "✅ 同步完成! 成功: 148, 失败: 2"
- [ ] **预期**: 进度条消失,显示最新同步记录

#### 4. 测试全量同步
- [ ] 点击 "全量同步" 按钮
- [ ] **预期**: 行为与增量同步相同,但Toast显示 "全量同步"

#### 5. 测试取消同步
- [ ] 点击 "增量同步" 开始同步
- [ ] 在进度到达50%之前,点击 "取消" 按钮
- [ ] **预期**: 进度立即停止
- [ ] **预期**: Toast "任务已取消"
- [ ] **预期**: 进度条消失

## 🐛 常见问题排查

### 问题1: 看不到"Mock模式"提示
**原因**: `USE_MOCK_DATA` 可能被设置为 `false`
**解决**:
```typescript
// 在文件顶部检查这个配置
const USE_MOCK_DATA = true; // 应该是 true
```

### 问题2: 创建分类后报错
**原因**: 浏览器控制台可能有错误
**解决**:
1. 打开浏览器开发者工具 (F12)
2. 查看 Console 标签页
3. 截图错误信息并反馈

### 问题3: 页面刷新后数据丢失
**这是正常现象!** Mock模式下数据不持久化,刷新后会恢复初始Mock数据。

### 问题4: Toast提示一闪而过
**这是正常现象!** Toast默认显示3秒后自动消失,可以快速点击查看。

## ✅ 测试通过标准

### 分类管理
- [x] 能正常显示Mock初始数据
- [x] 创建/编辑/删除操作无报错
- [x] Toast提示包含"(Mock模式)"字样
- [x] 页面显示"🎭 Mock模式"标识
- [x] 树形结构展开/收起正常

### 数据同步
- [x] 显示上次同步记录
- [x] 增量同步有进度动画
- [x] 全量同步有进度动画
- [x] 取消功能正常工作
- [x] Toast提示包含"(Mock模式)"字样
- [x] 页面显示"🎭 Mock模式"标识

## 📊 测试结果记录

### 测试环境
- **浏览器**: _________
- **前端端口**: 3000
- **后端状态**: ❌ 未启动 (Mock模式不需要)
- **测试时间**: _________

### 测试人员签名
- **姓名**: _________
- **日期**: _________

### 发现的问题
1. _________
2. _________
3. _________

---

## 🎉 测试完成后

如果所有测试通过:
✅ Mock模式实现成功!
✅ 前端可以完全独立运行!
✅ 可以进行UI/UX的进一步优化!

如果有问题:
1. 记录具体错误信息
2. 截图保存
3. 查看浏览器控制台
4. 反馈给开发团队

---

**文档版本**: v1.0
**最后更新**: 2025-10-19

