# 🎯 市场情绪监控 - 小盘股/大盘股动态策略

## 📋 功能简介

根据您的交易策略需求实现的市场情绪监控系统，帮助您根据**恐慌贪婪指数**动态调整小盘股和大盘股的投资策略。

### 核心策略
```
当恐慌贪婪指数 > 标普500基准值 → 买入小盘股 ✅
当恐慌贪婪指数 ≤ 标普500基准值 → 转向大盘股 🛡️
```

## 🚀 快速开始

### 1. 启动前端
```bash
cd zhixing_fronted
pnpm dev
```

### 2. 访问功能
- 打开浏览器：http://localhost:3001
- 点击左侧导航"市场情绪"
- 或直接访问：http://localhost:3001#sentiment

### 3. 查看策略建议
- ✅ **绿色提示** = 适合买入小盘股
- 🛡️ **蓝色提示** = 建议转向大盘股

## 📊 功能特性

### 实时监控
- 📈 恐慌贪婪指数（0-100）
- 📊 标普500基准值
- 🎨 情绪等级可视化
- ⏰ 自动每5分钟更新

### 情绪等级
| 指数范围 | 情绪等级 | 颜色 |
|---------|---------|------|
| 0-20 | 极度恐慌 | 🔴 红色 |
| 21-40 | 恐慌 | 🟠 橙色 |
| 41-60 | 中性 | 🟡 黄色 |
| 61-80 | 贪婪 | 🟢 绿色 |
| 81-100 | 极度贪婪 | 🟢 深绿 |

### 策略建议
- **小盘股策略**：市场情绪好时，小盘股有更大上涨空间
- **大盘股策略**：市场情绪弱时，大盘股更加稳健安全

## 📁 文件结构

```
zhixing_fronted/
├── components/market/
│   └── MarketSentimentMonitor.tsx    # 市场情绪监控组件
├── app/
│   ├── api/market/sentiment/
│   │   └── route.ts                  # API路由
│   └── page.tsx                      # 主页面（已集成）
├── 市场情绪监控功能说明.md            # 详细文档
├── 市场情绪监控-快速测试.md          # 测试指南
└── MARKET_SENTIMENT_README.md        # 本文件
```

## 🔧 技术实现

### 前端组件
- **框架**: React + Next.js 15
- **UI库**: shadcn/ui + Tailwind CSS
- **图标**: Lucide React
- **自动更新**: 5分钟定时刷新

### API接口
- **端点**: `GET /api/market/sentiment`
- **返回**: JSON格式的市场情绪数据
- **当前状态**: Mock模式（随机数据）

### 数据流
```
用户访问页面
    ↓
调用API接口
    ↓
获取市场数据
    ↓
计算情绪等级
    ↓
生成策略建议
    ↓
展示给用户
```

## 📝 使用示例

### 场景1: 市场情绪良好
```
恐慌贪婪指数: 65
标普500基准: 50
情绪等级: 贪婪 🟢
策略建议: ✅ 适合买入小盘股
```

### 场景2: 市场情绪偏弱
```
恐慌贪婪指数: 35
标普500基准: 50
情绪等级: 恐慌 🟠
策略建议: 🛡️ 建议转向大盘股
```

## 🔌 集成老虎证券API

### 当前状态
⚠️ **Mock模式** - 使用随机生成的数据

### 升级到真实数据

#### 步骤1: 获取API密钥
访问 https://quant.itigerup.com/ 申请API密钥

#### 步骤2: 配置环境变量
创建 `.env.local` 文件：
```bash
TIGER_API_KEY=your_tiger_id
TIGER_SECRET_KEY=your_private_key
TIGER_ACCOUNT=your_account_id
```

#### 步骤3: 安装SDK
```bash
pnpm add tigeropen-client-js
```

#### 步骤4: 更新API
修改 `app/api/market/sentiment/route.ts`，参考详细文档

## 📖 相关文档

- **功能说明**: `市场情绪监控功能说明.md`
- **测试指南**: `市场情绪监控-快速测试.md`
- **老虎API文档**: https://quant.itigerup.com/

## ✅ 测试清单

- [ ] 页面正常加载
- [ ] 显示恐慌贪婪指数
- [ ] 显示情绪等级
- [ ] 显示策略建议
- [ ] 手动刷新功能
- [ ] 自动更新功能
- [ ] 策略逻辑正确

## 🎨 界面预览

### 主界面
- 恐慌贪婪指数进度条
- 标普500基准进度条
- 情绪等级徽章
- 策略建议卡片
- 策略规则说明
- 刷新按钮

### 策略提示
- **小盘股**: 绿色背景 + 上涨图标
- **大盘股**: 蓝色背景 + 下降图标

## 🚧 未来扩展

### 计划功能
- [ ] 历史趋势图表
- [ ] 自定义阈值设置
- [ ] 市场变化提醒
- [ ] 策略回测功能
- [ ] 多市场支持（A股、港股）
- [ ] 导出数据功能

### 优化方向
- [ ] 更精细的情绪分级
- [ ] 结合其他技术指标
- [ ] 机器学习预测
- [ ] 实时推送通知

## ⚠️ 注意事项

1. **API限流**: 注意老虎证券API调用频率限制
2. **数据延迟**: 市场数据可能有延迟
3. **策略风险**: 仅供参考，需结合其他因素
4. **交易成本**: 频繁切换可能产生较高成本

## 🤝 支持与反馈

如有问题或建议，请：
1. 查看详细文档
2. 运行测试指南
3. 检查浏览器控制台
4. 联系开发团队

## 📊 版本历史

- **v1.0.0** (2025-10-22)
  - ✅ 初始版本发布
  - ✅ Mock数据模式
  - ✅ 基础UI和交互
  - ✅ 自动更新功能
  - ⏳ 待集成真实API

---

**祝交易顺利！** 📈
