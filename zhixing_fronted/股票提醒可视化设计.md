# 股票提醒可视化系统设计

## 设计目标

从推特等社交媒体收集多个大佬的股票分析，将他们的止损、止盈、加仓等关键价位可视化展示，帮助投资者做出更明智的决策。

## 核心功能

### 1. 专家观点聚合
- **多渠道来源**：Twitter、微博、Telegram、研究报告等
- **结构化数据**：
  - 专家信息（名称、头像、粉丝数、可信度）
  - 观点内容（文字、图片、图表）
  - 情绪倾向（看多/看空/中性）
  - 关键价位（止损/止盈/入场/加仓/减仓）

### 2. 价格提醒可视化图表
- **K线图基础**：使用 Lightweight Charts 展示价格走势
- **价格标记线**：
  - 不同颜色代表不同专家
  - 不同线型代表不同类型（止损=虚线，止盈=实线，加仓=点线）
  - 悬停显示详细信息
- **动态高亮**：点击专家卡片可在图表上高亮显示其关键价位
- **图例说明**：清晰展示各专家和价位类型的对应关系

### 3. 共识热力图
- **价格区间分析**：
  - 将价格范围分成多个区间
  - 统计每个区间的关键位数量
  - 热力图显示专家关注度
- **共识区域识别**：
  - 高亮显示多个专家都标记的价位
  - 按专家数量排序
  - 显示距离当前价格的百分比
- **统计面板**：
  - 总止损位数量
  - 总止盈位数量
  - 总入场位数量
  - 总加仓位数量

### 4. 专家观点卡片
- **信息展示**：
  - 专家头像和认证标识
  - 来源平台和时间
  - 粉丝数和可信度评分
  - 观点内容和图片
- **关键价位列表**：
  - 每个价位的类型和价格
  - 距离当前价格的百分比
  - 价位设置的理由
- **交互功能**：
  - 点击"在图表显示"高亮该专家的价位
  - 点击图片放大查看
  - 点击来源链接查看原文

## 技术实现

### 组件架构

```
app/stock-enhanced/[symbol]/page.tsx
├── ExpertOpinionCard (专家观点卡片)
├── PriceAlertChart (价格提醒图表)
└── ConsensusHeatmap (共识热力图)
```

### 数据结构

```typescript
interface ExpertOpinion {
  id: string
  expertName: string
  expertAvatar?: string
  source: string // 'twitter', 'weibo', 'telegram'
  sourceUrl?: string
  timestamp: string
  content: string
  sentiment: 'bullish' | 'bearish' | 'neutral'
  priceLevels: PriceLevel[]
  images?: string[]
  credibility?: number // 0-100
  followers?: number
}

interface PriceLevel {
  price: number
  type: 'stop_loss' | 'take_profit' | 'add_position' | 'reduce_position' | 'entry'
  reason?: string
}
```

### 颜色方案

- **专家颜色**：蓝、紫、粉、琥珀、翠绿、青、橙、靛蓝（循环使用）
- **价位类型颜色**：
  - 止损：红色 (#ef4444)
  - 止盈：绿色 (#22c55e)
  - 加仓：蓝色 (#3b82f6)
  - 减仓：橙色 (#f97316)
  - 入场：紫色 (#8b5cf6)

### 交互设计

1. **默认状态**：显示所有专家观点，图表上高亮前2位专家
2. **点击高亮**：点击"在图表显示"按钮切换该专家在图表上的显示
3. **悬停提示**：鼠标悬停在价格线上显示详细信息
4. **筛选功能**：通过标签页筛选看多/看空/全部观点
5. **添加观点**：支持手动添加专家观点

## 使用场景

### 场景1：从推特看到大佬分析
1. 用户在推特看到某大佬发布 AAPL 的分析
2. 大佬提到：止损 178，入场 181-182，止盈 195
3. 用户打开系统，点击"添加观点"
4. 填写专家信息和关键价位
5. 系统自动在图表上标记这些价位

### 场景2：对比多个大佬观点
1. 系统已收集5位大佬的 AAPL 观点
2. 用户查看共识热力图，发现 180 附近有3位大佬都标记为关键位
3. 用户点击高亮这3位大佬
4. 图表上清晰显示他们的止损、止盈位置
5. 用户基于多方观点做出交易决策

### 场景3：价格触及提醒
1. 用户关注的股票价格接近某个关键位
2. 系统发送提醒：价格已接近"华尔街老王"的止损位 178
3. 用户打开页面查看详情
4. 结合其他专家观点决定是否止损

## 后续优化方向

1. **自动抓取**：从社交媒体自动抓取大佬观点
2. **AI解析**：使用 AI 自动解析文字和图片中的关键价位
3. **实时提醒**：价格触及关键位时推送通知
4. **历史追踪**：记录专家历史预测的准确率
5. **社区评分**：用户可以对专家观点点赞和评论
6. **移动端适配**：优化移动端显示效果

## 访问地址

开发环境：http://localhost:3001/stock-enhanced/AAPL

## Mock 数据说明

当前使用 Mock 数据演示功能：
- 5位专家的观点
- 每位专家2-5个关键价位
- 包含止损、止盈、入场、加仓等类型
- 可信度和粉丝数等信息
