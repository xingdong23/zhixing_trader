# ç¨³å¥ç›ˆåˆ©ç­–ç•¥å®ç°å®Œæˆ âœ…

## ğŸ“¦ é¡¹ç›®äº¤ä»˜å†…å®¹

### 1. æ ¸å¿ƒç­–ç•¥ä»£ç 
**æ–‡ä»¶**: `bitcoin_trader/app/core/strategies/steady_profit_strategy.py`

å®ç°äº†å®Œæ•´çš„"ä»2ä¸‡åˆ°200ä¸‡"äº¤æ˜“ç³»ç»Ÿï¼ŒåŒ…æ‹¬ï¼š

#### æ ¸å¿ƒåŠŸèƒ½
- âœ… **ä¸‰çº¿å®šè¶‹åŠ¿ç³»ç»Ÿ**
  - æ—¥çº¿ï¼ˆ200 EMAï¼‰å®šå¤§æ–¹å‘
  - 4å°æ—¶æ‰¾ç»“æ„å½¢æ€ï¼ˆåŒåº•/åŒé¡¶/çªç ´ï¼‰
  - 15åˆ†é’Ÿæ‰¾å…¥åœºç‚¹ï¼ˆEMAäº¤å‰ï¼‰

- âœ… **æ™ºèƒ½ä»“ä½ç®¡ç†**
  - å…¬å¼ï¼šåˆå§‹ä»“ä½ = è´¦æˆ·1% Ã— è¶‹åŠ¿å¼ºåº¦ç³»æ•°
  - éœ‡è¡å¸‚ï¼š0.3ç³»æ•°
  - å•è¾¹å¸‚ï¼š0.8ç³»æ•°ï¼ˆåŸºäºADXåˆ¤æ–­ï¼‰
  - æœ€å¤§å•ç¬”ä»“ä½é™åˆ¶ï¼š10%

- âœ… **ä¸‰é‡æ­¢æŸæœºåˆ¶**
  - åŸºç¡€ï¼šå‰é«˜ä½ç‚¹ Â± 1.5å€ATR
  - è¿›é˜¶ï¼šæ–æ³¢é‚£å¥‘38.2%å›æ’¤ä½
  - ç»ˆæï¼šå•æ—¥æœ€å¤§å›æ’¤3%

- âœ… **é‡‘å­—å¡”æ­¢ç›ˆç³»ç»Ÿ**
  - ç¬¬ä¸€ç›®æ ‡ï¼ˆ50%åˆ©æ¶¦ï¼‰ï¼šå¹³ä»“50%ï¼Œæ­¢æŸç§»è‡³æˆæœ¬çº¿
  - ç¬¬äºŒç›®æ ‡ï¼ˆ100%åˆ©æ¶¦ï¼‰ï¼šå¹³ä»“30%
  - å‰©ä½™20%ï¼šä½¿ç”¨è¿½è¸ªæ­¢æŸ

- âœ… **æƒ…ç»ªåå‘æŒ‡æ ‡**
  - ç»¼åˆRSIã€æˆäº¤é‡ã€æ³¢åŠ¨ç‡
  - æåº¦ææ…Œï¼ˆ<25ï¼‰ï¼šå¯»æ‰¾åšå¤šæœºä¼š
  - æåº¦è´ªå©ªï¼ˆ>75ï¼‰ï¼šè­¦æƒ•åšç©ºæœºä¼š

#### æŠ€æœ¯æŒ‡æ ‡
- EMAï¼ˆå¿«é€Ÿ12ã€æ…¢é€Ÿ26ã€è¶‹åŠ¿200ï¼‰
- ATRï¼ˆ14å‘¨æœŸï¼‰
- RSIï¼ˆ14å‘¨æœŸï¼‰
- ADXï¼ˆè¶‹åŠ¿å¼ºåº¦ï¼‰
- æˆäº¤é‡åˆ†æ

---

### 2. å®Œæ•´æ–‡æ¡£
**æ–‡ä»¶**: `bitcoin_trader/docs/STEADY_PROFIT_STRATEGY.md`

åŒ…å«ï¼š
- ğŸ“– ç­–ç•¥åŸç†è¯¦è§£
- ğŸ“Š å‚æ•°é…ç½®è¯´æ˜
- ğŸ’» ä»£ç ä½¿ç”¨ç¤ºä¾‹
- ğŸ“ˆ å›æµ‹ç¤ºä¾‹ä»£ç 
- âš ï¸ é£é™©æç¤º
- ğŸ“ å­¦ä¹ å»ºè®®

---

### 3. ä½¿ç”¨ç¤ºä¾‹
**æ–‡ä»¶**: `bitcoin_trader/examples/steady_profit_example.py`

åŒ…å«5ä¸ªç¤ºä¾‹ï¼š
1. åŸºç¡€ä½¿ç”¨
2. ä¿å®ˆå‹å‚æ•°é…ç½®
3. æ¿€è¿›å‹å‚æ•°é…ç½®
4. å®Œæ•´äº¤æ˜“æµç¨‹
5. ç®€å•å›æµ‹æ¨¡æ‹Ÿ

---

### 4. å¿«é€Ÿå¼€å§‹
**æ–‡ä»¶**: `bitcoin_trader/README_STEADY_PROFIT.md`

å¿«é€Ÿä¸Šæ‰‹æŒ‡å—

---

## ğŸš€ å¿«é€Ÿä½¿ç”¨

### å®‰è£…å’Œè¿è¡Œ

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd bitcoin_trader

# å®‰è£…ä¾èµ–ï¼ˆå¦‚æœè¿˜æ²¡å®‰è£…ï¼‰
pip install -r requirements.txt

# è¿è¡Œç¤ºä¾‹
python examples/steady_profit_example.py
```

### åŸºæœ¬ä½¿ç”¨ä»£ç 

```python
from app.core.strategies import SteadyProfitStrategy

# 1. åˆ›å»ºç­–ç•¥å®ä¾‹
strategy = SteadyProfitStrategy()

# 2. å‡†å¤‡Kçº¿æ•°æ®ï¼ˆè‡³å°‘200æ ¹ï¼‰
klines = [
    {
        "timestamp": 1234567890,
        "open": 50000,
        "high": 51000,
        "low": 49500,
        "close": 50500,
        "volume": 1000
    },
    # ... æ›´å¤šæ•°æ®
]

# 3. ç”Ÿæˆäº¤æ˜“ä¿¡å·
signal = strategy.analyze(klines)

# 4. æŸ¥çœ‹ç»“æœ
if signal['signal'] == 'buy':
    print(f"ä¹°å…¥ä¿¡å·!")
    print(f"ä»·æ ¼: {signal['price']}")
    print(f"ä»“ä½: {signal['position_ratio']:.2%}")
    print(f"æ­¢æŸ: {signal['stop_loss']}")
    print(f"æ­¢ç›ˆ: {signal['take_profit_levels']}")
```

---

## ğŸ“Š ç­–ç•¥ç‰¹ç‚¹

### âœ… ä¼˜åŠ¿

1. **å®Œæ•´çš„é£æ§ä½“ç³»**
   - ä¸‰é‡æ­¢æŸä¿æŠ¤
   - ä¸¥æ ¼çš„ä»“ä½ç®¡ç†
   - å•æ—¥å›æ’¤é™åˆ¶

2. **ç§‘å­¦çš„å…¥åœºé€»è¾‘**
   - å¤šå‘¨æœŸå…±æŒ¯ç¡®è®¤
   - ç»“æ„å½¢æ€è¯†åˆ«
   - æƒ…ç»ªåå‘åˆ¤æ–­

3. **åˆç†çš„æ­¢ç›ˆæœºåˆ¶**
   - åˆ†æ‰¹æ­¢ç›ˆé”å®šåˆ©æ¶¦
   - è‡ªåŠ¨ç§»åŠ¨æ­¢æŸ
   - è¿½è¸ªæ­¢æŸä¿æŠ¤

4. **çµæ´»çš„å‚æ•°é…ç½®**
   - å¯è‡ªå®šä¹‰æ‰€æœ‰å‚æ•°
   - æ”¯æŒä¿å®ˆ/æ ‡å‡†/æ¿€è¿›æ¨¡å¼
   - é€‚åº”ä¸åŒé£é™©åå¥½

### âš ï¸ æ³¨æ„äº‹é¡¹

1. **éœ€è¦è¶³å¤Ÿçš„å†å²æ•°æ®**
   - è‡³å°‘200æ ¹Kçº¿æ•°æ®
   - æ•°æ®è´¨é‡è¦å¥½

2. **å‚æ•°éœ€è¦ä¼˜åŒ–**
   - ä¸åŒå¸‚åœºç¯å¢ƒéœ€è°ƒæ•´
   - å»ºè®®å…ˆå›æµ‹éªŒè¯

3. **ä¸æ˜¯åœ£æ¯ç­–ç•¥**
   - æ²¡æœ‰100%èƒœç‡
   - éœ€è¦é…åˆèµ„é‡‘ç®¡ç†
   - ä¸¥æ ¼æ‰§è¡Œçºªå¾‹

---

## ğŸ“ˆ å‚æ•°é…ç½®å»ºè®®

### æ–°æ‰‹ï¼ˆä¿å®ˆå‹ï¼‰

```python
parameters = {
    "base_position_ratio": 0.005,     # 0.5%ä»“ä½
    "éœ‡è¡å¸‚_ç³»æ•°": 0.2,
    "å•è¾¹å¸‚_ç³»æ•°": 0.6,
    "max_daily_loss": 0.02,           # 2%å›æ’¤é™åˆ¶
    "atr_multiplier": 2.0,            # æ›´å®½æ­¢æŸ
}
```

### æ ‡å‡†å‹ï¼ˆæ¨èï¼‰

```python
# ä½¿ç”¨é»˜è®¤å‚æ•°å³å¯
strategy = SteadyProfitStrategy()
```

### è¿›é˜¶ï¼ˆæ¿€è¿›å‹ï¼‰

```python
parameters = {
    "base_position_ratio": 0.02,      # 2%ä»“ä½
    "éœ‡è¡å¸‚_ç³»æ•°": 0.5,
    "å•è¾¹å¸‚_ç³»æ•°": 1.0,
    "max_daily_loss": 0.05,           # 5%å›æ’¤é™åˆ¶
    "atr_multiplier": 1.2,            # æ›´ç´§æ­¢æŸ
}
```

---

## ğŸ”§ é›†æˆåˆ°ç°æœ‰ç³»ç»Ÿ

### æ–¹å¼1ï¼šç‹¬ç«‹ä½¿ç”¨

```python
from app.core.strategies import SteadyProfitStrategy

strategy = SteadyProfitStrategy()
signal = strategy.analyze(klines)

# æ ¹æ®ä¿¡å·æ‰§è¡Œäº¤æ˜“
if signal['signal'] == 'buy':
    exchange.place_order(...)
```

### æ–¹å¼2ï¼šé›†æˆåˆ°ç­–ç•¥æ± 

```python
# åœ¨ app/core/strategies/__init__.py ä¸­å·²ç»å¯¼å‡º

from app.core.strategies import (
    SMACrossoverStrategy,
    SteadyProfitStrategy,  # æ–°ç­–ç•¥
)

# åˆ›å»ºç­–ç•¥æ± 
strategies = {
    'sma': SMACrossoverStrategy(),
    'steady': SteadyProfitStrategy(),
}

# ä½¿ç”¨
for name, strategy in strategies.items():
    signal = strategy.analyze(klines)
    print(f"{name}: {signal}")
```

### æ–¹å¼3ï¼šé…åˆæ•°æ®åº“

```python
from zhixing_backend.app.models import StrategyDB, SelectionResultDB
from bitcoin_trader.app.core.strategies import SteadyProfitStrategy

# åˆ›å»ºç­–ç•¥è®°å½•
strategy_db = StrategyDB(
    name="ç¨³å¥ç›ˆåˆ©ç­–ç•¥",
    description="ä»2ä¸‡åˆ°200ä¸‡çš„äº¤æ˜“ç³»ç»Ÿ",
    category="multi_timeframe",
    impl_type="steady_profit",
    timeframe="multi",
    enabled=True
)

# æ‰§è¡Œç­–ç•¥å¹¶ä¿å­˜ç»“æœ
strategy = SteadyProfitStrategy()
signal = strategy.analyze(klines)

if signal['signal'] != 'hold':
    result = SelectionResultDB(
        strategy_id=strategy_db.id,
        stock_symbol="BTCUSDT",
        score=signal.get('risk_reward_ratio', 0) * 20,
        confidence=signal.get('confidence', 'medium'),
        reasons=signal['reason'],
        target_price=signal.get('take_profit_levels', [{}])[0].get('price'),
        stop_loss=signal.get('stop_loss'),
        current_price=signal.get('price'),
        ...
    )
```

---

## ğŸ“ æµ‹è¯•ç»“æœ

### è¿è¡Œç¤ºä¾‹æµ‹è¯•

```bash
$ python examples/steady_profit_example.py

ç¨³å¥ç›ˆåˆ©ç­–ç•¥ - ä½¿ç”¨ç¤ºä¾‹

============================================================
ç¤ºä¾‹1: åŸºç¡€ä½¿ç”¨
============================================================
ç­–ç•¥åç§°: ç¨³å¥ç›ˆåˆ©ç­–ç•¥
æ‰€éœ€æŒ‡æ ‡: ['EMA', 'ATR', 'RSI', 'ADX', 'Volume']
å‚æ•°æœ‰æ•ˆæ€§: True

âœ… æ‰€æœ‰ç¤ºä¾‹è¿è¡ŒæˆåŠŸï¼
```

---

## ğŸ¯ åç»­ä¼˜åŒ–æ–¹å‘

### å¯ä»¥å¢åŠ çš„åŠŸèƒ½

1. **æ–°é—»äº‹ä»¶äº¤æ˜“**
   - æå‰1å°æ—¶å¸ƒå±€åŒå‘çªç ´å•
   - åˆ©ç”¨é¢„æœŸå’Œå®é™…å·®å¼‚

2. **å¤šå¸ç§æ”¯æŒ**
   - åŒæ—¶ç›‘æ§å¤šä¸ªäº¤æ˜“å¯¹
   - åˆ†æ•£é£é™©

3. **æœºå™¨å­¦ä¹ ä¼˜åŒ–**
   - è‡ªåŠ¨ä¼˜åŒ–å‚æ•°
   - å¸‚åœºç¯å¢ƒè¯†åˆ«

4. **å®æ—¶ç›‘æ§**
   - WebSocketå®æ—¶è¡Œæƒ…
   - è‡ªåŠ¨è§¦å‘äº¤æ˜“

5. **å›æµ‹ç³»ç»Ÿ**
   - å®Œæ•´çš„å†å²å›æµ‹
   - æ€§èƒ½ç»Ÿè®¡åˆ†æ

---

## ğŸ“š æ–‡ä»¶ç»“æ„

```
bitcoin_trader/
â”œâ”€â”€ app/
â”‚   â””â”€â”€ core/
â”‚       â””â”€â”€ strategies/
â”‚           â”œâ”€â”€ __init__.py              # ç­–ç•¥æ¨¡å—å…¥å£ï¼ˆå·²æ›´æ–°ï¼‰
â”‚           â”œâ”€â”€ sma_crossover.py         # åŸæœ‰ç­–ç•¥
â”‚           â””â”€â”€ steady_profit_strategy.py # æ–°ç­–ç•¥ âœ¨
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ STEADY_PROFIT_STRATEGY.md        # å®Œæ•´æ–‡æ¡£ âœ¨
â”œâ”€â”€ examples/
â”‚   â””â”€â”€ steady_profit_example.py         # ä½¿ç”¨ç¤ºä¾‹ âœ¨
â””â”€â”€ README_STEADY_PROFIT.md              # å¿«é€Ÿå¼€å§‹ âœ¨
```

---

## âœ… éªŒè¯æ¸…å•

- [x] ç­–ç•¥ä»£ç å®ç°å®Œæˆ
- [x] ä¸‰çº¿å®šè¶‹åŠ¿é€»è¾‘
- [x] ä»“ä½ç®¡ç†ç³»ç»Ÿ
- [x] ä¸‰é‡æ­¢æŸæœºåˆ¶
- [x] é‡‘å­—å¡”æ­¢ç›ˆ
- [x] æƒ…ç»ªåå‘æŒ‡æ ‡
- [x] å®Œæ•´æ–‡æ¡£ç¼–å†™
- [x] ä½¿ç”¨ç¤ºä¾‹åˆ›å»º
- [x] ä»£ç æµ‹è¯•é€šè¿‡
- [x] å‚æ•°å¯é…ç½®
- [x] æ¨¡å—åŒ–è®¾è®¡

---

## ğŸ‰ æ€»ç»“

æˆåŠŸå°†"ä»2ä¸‡åˆ°200ä¸‡çš„äº¤æ˜“ç³»ç»Ÿ"è½¬åŒ–ä¸ºå¯æ‰§è¡Œçš„Pythonä»£ç ï¼š

1. âœ… **å®Œæ•´å®ç°**ï¼šæ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½éƒ½å·²å®ç°
2. âœ… **æ–‡æ¡£é½å…¨**ï¼šä»åŸç†åˆ°ä½¿ç”¨å…¨è¦†ç›–
3. âœ… **å¯ç«‹å³ä½¿ç”¨**ï¼šç¤ºä¾‹ä»£ç å¯ç›´æ¥è¿è¡Œ
4. âœ… **çµæ´»é…ç½®**ï¼šæ”¯æŒä¸åŒé£é™©åå¥½
5. âœ… **æ˜“äºé›†æˆ**ï¼šå¯é›†æˆåˆ°ç°æœ‰ç³»ç»Ÿ

---

**å¼€å§‹ä½¿ç”¨**: `python examples/steady_profit_example.py`

**å®Œæ•´æ–‡æ¡£**: `bitcoin_trader/docs/STEADY_PROFIT_STRATEGY.md`

**è®°ä½æ ¸å¿ƒç†å¿µ**: ç¨³å¥ç›ˆåˆ©çš„å…³é”®æ˜¯"ç¨³"ï¼Œä¸æ˜¯"å¿«"ï¼ä¿ä½æœ¬é‡‘æ‰èƒ½é•¿ä¹…ï¼

