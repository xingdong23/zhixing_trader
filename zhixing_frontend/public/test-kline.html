<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kçº¿å›¾æµ‹è¯•é¡µé¢</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-links {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .test-link {
            padding: 10px 15px;
            background: #3B82F6;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            transition: background-color 0.2s;
        }
        .test-link:hover {
            background: #2563EB;
        }
        .info {
            background: #EBF8FF;
            border: 1px solid #BEE3F8;
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 20px;
        }
        .status {
            margin-top: 20px;
            padding: 10px;
            border-radius: 5px;
        }
        .status.success {
            background: #D1FAE5;
            border: 1px solid #6EE7B7;
            color: #065F46;
        }
        .status.error {
            background: #FEE2E2;
            border: 1px solid #FECACA;
            color: #991B1B;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”„ è‚¡ç¥¨è¯¦æƒ…é¡µé¢è°ƒè¯•æµ‹è¯•</h1>
        
        <div class="info">
            <h3>ğŸ“‹ æµ‹è¯•è¯´æ˜</h3>
            <p>è¿™ä¸ªé¡µé¢ç”¨äºæµ‹è¯•è‚¡ç¥¨è¯¦æƒ…é¡µé¢çš„åŠ¨æ€æ•°æ®åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š</p>
            <ul>
                <li>âœ… ä»åç«¯APIè·å–è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯</li>
                <li>âœ… åŠ¨æ€Kçº¿å›¾æ˜¾ç¤ºï¼ˆä½¿ç”¨Rechartsåº“ï¼‰</li>
                <li>âœ… æ—¶é—´å‘¨æœŸåˆ‡æ¢åŠŸèƒ½ï¼ˆæ—¥çº¿ã€å°æ—¶çº¿ç­‰ï¼‰</li>
                <li>âœ… æŠ€æœ¯æŒ‡æ ‡æ˜¾ç¤ºï¼ˆRSIã€EMAç­‰ï¼‰</li>
                <li>âœ… é”™è¯¯å¤„ç†å’ŒMockæ•°æ®fallback</li>
            </ul>
        </div>

        <h3>ğŸš€ æµ‹è¯•é“¾æ¥</h3>
        <div class="test-links">
            <a href="http://localhost:3000/stock/AAPL" class="test-link" target="_blank">
                ğŸ“ˆ AAPL - è‹¹æœå…¬å¸
            </a>
            <a href="http://localhost:3000/stock/TSLA" class="test-link" target="_blank">
                ğŸš— TSLA - ç‰¹æ–¯æ‹‰
            </a>
            <a href="http://localhost:3000/stock/NVDA" class="test-link" target="_blank">
                ğŸ”¥ NVDA - è‹±ä¼Ÿè¾¾
            </a>
            <a href="http://localhost:3000/stock/HK0000720786" class="test-link" target="_blank">
                ğŸ’° HK0000720786 - å¹³å®‰è´§å¸åŸºé‡‘
            </a>
            <a href="http://localhost:3000/" class="test-link" target="_blank">
                ğŸ  è¿”å›ä¸»é¡µ
            </a>
        </div>

        <h3>ğŸ”§ APIæµ‹è¯•</h3>
        <button onclick="testAPI()" style="padding: 10px 20px; background: #10B981; color: white; border: none; border-radius: 5px; cursor: pointer;">
            æµ‹è¯•åç«¯APIè¿æ¥
        </button>
        <div id="api-status" class="status" style="display: none;"></div>

        <h3>ğŸ“Š åŠŸèƒ½è¯´æ˜</h3>
        <div class="info">
            <h4>ğŸ¯ å·²å®ç°çš„åŠŸèƒ½ï¼š</h4>
            <ul>
                <li><strong>åŠ¨æ€æ•°æ®è·å–</strong>ï¼šä»åç«¯APIè·å–çœŸå®è‚¡ç¥¨æ•°æ®</li>
                <li><strong>Kçº¿å›¾æ˜¾ç¤º</strong>ï¼šä½¿ç”¨Rechartsåº“ç»˜åˆ¶äº¤äº’å¼Kçº¿å›¾</li>
                <li><strong>æ—¶é—´å‘¨æœŸåˆ‡æ¢</strong>ï¼šæ”¯æŒæ—¥çº¿ã€å°æ—¶çº¿ã€15åˆ†é’Ÿã€5åˆ†é’Ÿ</li>
                <li><strong>æ•°æ®èŒƒå›´é€‰æ‹©</strong>ï¼šæ”¯æŒ30å¤©ã€90å¤©ã€åŠå¹´ã€ä¸€å¹´</li>
                <li><strong>æŠ€æœ¯æŒ‡æ ‡</strong>ï¼šæ˜¾ç¤ºRSIã€EMAç­‰æŠ€æœ¯æŒ‡æ ‡</li>
                <li><strong>é”™è¯¯å¤„ç†</strong>ï¼šAPIå¤±è´¥æ—¶ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ä½œä¸ºfallback</li>
                <li><strong>å“åº”å¼è®¾è®¡</strong>ï¼šé€‚é…ä¸åŒå±å¹•å°ºå¯¸</li>
            </ul>

            <h4>ğŸ”„ æ•°æ®æµç¨‹ï¼š</h4>
            <ol>
                <li>é¡µé¢åŠ è½½ â†’ ä»APIè·å–è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯</li>
                <li>Kçº¿å›¾ç»„ä»¶ â†’ ä»APIè·å–Kçº¿æ•°æ®</li>
                <li>å¦‚æœAPIå¤±è´¥ â†’ ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ç¡®ä¿åŠŸèƒ½æ­£å¸¸</li>
                <li>ç”¨æˆ·äº¤äº’ â†’ å®æ—¶æ›´æ–°å›¾è¡¨å’Œæ•°æ®</li>
            </ol>
        </div>
    </div>

    <script>
        async function testAPI() {
            const statusDiv = document.getElementById('api-status');
            statusDiv.style.display = 'block';
            statusDiv.innerHTML = 'ğŸ”„ æ­£åœ¨æµ‹è¯•APIè¿æ¥...';
            statusDiv.className = 'status';

            try {
                // æµ‹è¯•è‚¡ç¥¨åˆ—è¡¨API
                const response1 = await fetch('http://localhost:8000/api/v1/stocks/overview?page=1&page_size=5');
                const result1 = await response1.json();
                
                if (!response1.ok) throw new Error('è‚¡ç¥¨åˆ—è¡¨APIå¤±è´¥');

                // æµ‹è¯•è‚¡ç¥¨è¯¦æƒ…API
                const response2 = await fetch('http://localhost:8000/api/v1/market-data/info/AAPL');
                const result2 = await response2.json();
                
                if (!response2.ok) throw new Error('è‚¡ç¥¨è¯¦æƒ…APIå¤±è´¥');

                statusDiv.innerHTML = `
                    âœ… APIè¿æ¥æˆåŠŸï¼<br>
                    ğŸ“Š è‚¡ç¥¨åˆ—è¡¨ï¼š${result1.data?.stocks?.length || 0} æ¡è®°å½•<br>
                    ğŸ’¹ è‚¡ç¥¨è¯¦æƒ…ï¼š${result2.data?.name || 'AAPL'} æ•°æ®è·å–æˆåŠŸ
                `;
                statusDiv.className = 'status success';
            } catch (error) {
                statusDiv.innerHTML = `
                    âŒ APIè¿æ¥å¤±è´¥ï¼š${error.message}<br>
                    ğŸ’¡ ä¸ç”¨æ‹…å¿ƒï¼Œé¡µé¢ä¼šä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ç¡®ä¿åŠŸèƒ½æ­£å¸¸å·¥ä½œ
                `;
                statusDiv.className = 'status error';
            }
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æµ‹è¯•API
        window.onload = function() {
            setTimeout(testAPI, 1000);
        };
    </script>
</body>
</html>
